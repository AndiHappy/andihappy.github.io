<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>é£ç¿”çš„é¢åŒ…</title>
    <description>åå°æœåŠ¡ã€å¾®æœåŠ¡ã€æ¶æ„ã€é»‘å®¢ä¸ç”»å®¶ | é£ç¿”çš„é¢åŒ… JAVA Developer Andi Happy andiHappy | è¿™é‡Œæ˜¯ é£ç¿”çš„é¢åŒ… çš„ä¸ªäººåšå®¢ï¼Œä¸ä½ ä¸€èµ·å‘ç°æ›´å¤§çš„ä¸–ç•Œã€‚</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Fri, 30 Aug 2019 20:56:06 +0800</pubDate>
    <lastBuildDate>Fri, 30 Aug 2019 20:56:06 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>ç¼–ç ç¼–ä¸ä¸‹å»äº†æ€ä¹ˆåŠï¼Ÿ</title>
        <description>&lt;p&gt;How to program when you donâ€™t feel like it
  ä¸æƒ³å¹²çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿ
&lt;!--more--&gt;&lt;/p&gt;

&lt;p&gt;I recently well and truly â€œhit the wallâ€ when it came to coding.
Every time I sat down to code, I felt stuck, like I wasnâ€™t making any progress at all.
I was tired, de-motivated and dealing with headaches.
æˆ‘å¾ˆç´¯ï¼Œæ²¡æœ‰åŠ¨åŠ›å»å¤„ç†å¤´ç—›é—®é¢˜ã€‚
Any will to code I had previously had seemed completely gone and
when I finally got around to programming I only did the bare minimum.æœ€ä½é™åº¦ã€‚&lt;/p&gt;

&lt;p&gt;Here I was on day 52 of my 100 days of code and I didnâ€™t want to break my streak,
but there was nothing but frustration every time I sat down to program.
After a few days of this, I decided it wasnâ€™t a sustainable solution, it was costing me more than than I was gaining.
Something had to change.
Here are some things that helped get me back on track.&lt;/p&gt;

&lt;p&gt;If you find yourself completely and utterly stuck on whatever youâ€™re working with,Â donâ€™t try to force it.
Youâ€™re more likely to produce a mess that you will dread having to work with next time and
you end up in a self reinforcing loop of shitty days.&lt;/p&gt;

&lt;p&gt;Maybe youâ€™ve been putting off this cool tutorial or
thereâ€™s a few easy challenges on websites such as hackerrank, codewars or kattis that you can do.
It doesnâ€™t really matter what you do, but it needs to be easy and quick.
It will boost your confidence in your programming skills and give you some much needed wins.
å®ƒå°†å¢å¼ºæ‚¨å¯¹ç¼–ç¨‹æŠ€å·§çš„ä¿¡å¿ƒï¼Œå¹¶ä¸ºæ‚¨æä¾›ä¸€äº›æ€¥éœ€çš„èƒœåˆ©ã€‚&lt;/p&gt;

&lt;p&gt;You can also go back to the documentation or
see if you can find some tutorials on your problem.
Sometimes you need to go back to basic and maybe do a few exercises on the concepts involved in your project.
å›å¤´æŸ¥çœ‹æ•™ç¨‹æˆ–è€…åŸºç¡€çš„å†…å®¹&lt;/p&gt;

&lt;p&gt;Stay here until you feel comfortable cracking on with the thing that was causing you trouble.
If you find yourself easily distracted,Â try using the pomodoro technique.
Itâ€™s basically 25 min of focused work and a 5 minute break you repeat until you have reached your goal .
å¯ä»¥å°è¯•ç•ªèŒ„å·¥ä½œæ³•&lt;/p&gt;

&lt;p&gt;The most important thing is progress, especially if it is for something like 100DaysOfCode,
but just learning in general.
Not every day is going to be equally good, but you decide how bad a bad day is.
So on bad days, stick to small achievable goals.
Gain that confidence and motivation back.
é‡è¦çš„æ˜¯ä¿æŒconfidenceå’Œmotivation&lt;/p&gt;

&lt;p&gt;It took me a few days of solving progressively more difficult problems in the programming language I know best,
before I felt like going back to my project. It took me 15 minutes to find and fix something that had caused me trouble for 3 days. ğŸ˜…&lt;/p&gt;

&lt;p&gt;Hope some of these tips were helpful. Feel free to reach out onÂ TwitterÂ or comment with feedback, itâ€™s much appreciated.
Thank you for reading â¤ï¸&lt;/p&gt;
</description>
        <pubDate>Wed, 07 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/07/netty/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/07/netty/</guid>
        
        <category>JDK</category>
        
        
      </item>
    
      <item>
        <title>æ²‰ä¸‹å¿ƒæ¥åˆ†æHashMapçš„æºç ï¼ˆäº”ï¼‰çº¢é»‘æ ‘çš„åˆ é™¤</title>
        <description>&lt;p&gt;çº¢é»‘æ ‘çš„åˆ é™¤é€»è¾‘å’ŒHashMapä¸­çš„åˆ é™¤é€»è¾‘ï¼Œæ˜¯æœ‰ä¸åŒçš„ï¼Œå› ä¸ºåœ¨HashMapä¸­éœ€è¦ç»´æŠ¤nextçš„å±æ€§ï¼Œä»¥ä¾¿äºåœ¨treeè½¬ä¸ºlinkedlistçš„æ—¶å€™ï¼Œæ¯”è¾ƒçš„æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å…ˆä»æ™®é€šçš„çº¢é»‘æ ‘çš„åˆ é™¤é€»è¾‘è¯´èµ·ã€‚&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;çº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œ&quot;&gt;çº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œ&lt;/h3&gt;

&lt;p&gt;åˆ é™¤æ“ä½œé¦–å…ˆéœ€è¦åšçš„ä¹Ÿæ˜¯BSTï¼ˆäºŒå‰æœç´¢æ ‘ï¼‰çš„åˆ é™¤æ“ä½œï¼Œåˆ é™¤æ“ä½œä¼šåˆ é™¤å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯å¶å­èŠ‚ç‚¹å°±ç›´æ¥åˆ é™¤ï¼Œå¦‚æœæ˜¯éå¶å­èŠ‚ç‚¹ï¼Œä¼šç”¨å¯¹åº”çš„ä¸­åºéå†çš„åç»§èŠ‚ç‚¹æ¥é¡¶æ›¿è¦åˆ é™¤èŠ‚ç‚¹çš„ä½ç½®ï¼ˆå½“å‰èŠ‚ç‚¹å³å­æ ‘çš„æœ€å·¦èŠ‚ç‚¹ï¼‰ã€‚åˆ é™¤åå°±éœ€è¦åšåˆ é™¤ä¿®å¤æ“ä½œï¼Œä½¿çš„æ ‘ç¬¦åˆçº¢é»‘æ ‘çš„å®šä¹‰ï¼Œç¬¦åˆå®šä¹‰çš„çº¢é»‘æ ‘é«˜åº¦æ˜¯å¹³è¡¡çš„ã€‚&lt;/p&gt;

&lt;p&gt;åˆ é™¤ä¿®å¤æ“ä½œåœ¨é‡åˆ°è¢«åˆ é™¤çš„èŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼ˆä»2-3æ ‘çš„é€»è¾‘ä¸Šé¢æ¥çœ‹ï¼Œçº¢è‰²èŠ‚ç‚¹ç›´æ¥åˆ é™¤å³å¯ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ç›´æ¥çš„è¡¥åˆ°çº¢è‰²èŠ‚ç‚¹ç›¸è¿çš„é»‘è‰²èŠ‚ç‚¹å³å¯ï¼‰æˆ–è€…åˆ°è¾¾rootèŠ‚ç‚¹æ—¶ï¼Œä¿®å¤æ“ä½œå®Œæ¯•ã€‚&lt;/p&gt;

&lt;p&gt;åˆ é™¤ä¿®å¤æ“ä½œæ˜¯é’ˆå¯¹åˆ é™¤é»‘è‰²èŠ‚ç‚¹æ‰æœ‰çš„ï¼Œå½“é»‘è‰²èŠ‚ç‚¹è¢«åˆ é™¤åä¼šè®©æ•´ä¸ªæ ‘ä¸ç¬¦åˆRBTreeçš„å®šä¹‰çš„ç¬¬å››æ¡ï¼ˆç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€è‡´çš„çº¦æŸï¼‰ã€‚éœ€è¦åšçš„å¤„ç†æ˜¯ä»å…„å¼ŸèŠ‚ç‚¹ä¸Šå€Ÿè°ƒé»‘è‰²çš„èŠ‚ç‚¹è¿‡æ¥ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹æ²¡æœ‰é»‘èŠ‚ç‚¹å¯ä»¥å€Ÿè°ƒçš„è¯ï¼Œå°±åªèƒ½å¾€ä¸Šè¿½æº¯ï¼Œå°†æ¯ä¸€çº§çš„é»‘èŠ‚ç‚¹æ•°å‡å»ä¸€ä¸ªï¼Œä½¿å¾—æ•´æ£µæ ‘ç¬¦åˆçº¢é»‘æ ‘çš„å®šä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;åˆ é™¤æ“ä½œçš„æ€»ä½“æ€æƒ³æ˜¯ä»&lt;strong&gt;å…„å¼ŸèŠ‚ç‚¹å€Ÿè°ƒé»‘è‰²èŠ‚ç‚¹&lt;/strong&gt;ä½¿æ ‘ä¿æŒå±€éƒ¨çš„å¹³è¡¡ï¼Œå¦‚æœå±€éƒ¨çš„å¹³è¡¡è¾¾åˆ°äº†ï¼Œå°±çœ‹æ•´ä½“çš„æ ‘æ˜¯å¦æ˜¯å¹³è¡¡çš„ï¼Œå¦‚æœä¸å¹³è¡¡å°±æ¥ç€å‘ä¸Šè¿½æº¯è°ƒæ•´ã€‚&lt;/p&gt;

&lt;p&gt;åˆ é™¤ä¿®å¤æ“ä½œåˆ†ä¸ºå››ç§æƒ…å†µ(åˆ é™¤é»‘èŠ‚ç‚¹å)ï¼š&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;å¾…åˆ é™¤çš„èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¾…åˆ é™¤çš„èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²çš„èŠ‚ç‚¹ï¼Œä¸”å…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¾…è°ƒæ•´çš„èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²çš„èŠ‚ç‚¹ï¼Œä¸”å…„å¼ŸèŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œå³èŠ‚ç‚¹æ˜¯é»‘è‰²çš„(å…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹)ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹çš„è¯ï¼Œå°±æ˜¯å…„å¼ŸèŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œå·¦èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;å¾…è°ƒæ•´çš„èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²çš„èŠ‚ç‚¹ï¼Œä¸”å³å­èŠ‚ç‚¹æ˜¯æ˜¯çº¢è‰²çš„(å…„å¼ŸèŠ‚ç‚¹åœ¨å³è¾¹)ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹åœ¨å·¦è¾¹ï¼Œåˆ™å°±æ˜¯å¯¹åº”çš„å°±æ˜¯å·¦èŠ‚ç‚¹æ˜¯çº¢è‰²çš„ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;æƒ…å†µ1&quot;&gt;æƒ…å†µ1&lt;/h4&gt;

&lt;p&gt;case1 ç”±äºå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ— æ³•å€Ÿè°ƒé»‘èŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦å°†å…„å¼ŸèŠ‚ç‚¹æå‡åˆ°çˆ¶èŠ‚ç‚¹ï¼Œç”±äºå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œæ ¹æ®RBTreeçš„å®šä¹‰ï¼Œå…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯é»‘è‰²çš„ï¼Œå°±å¯ä»¥ä»å®ƒçš„å­èŠ‚ç‚¹å€Ÿè°ƒäº†ã€‚&lt;/p&gt;

&lt;p&gt;case 1è¿™æ ·è½¬æ¢ä¹‹åå°±ä¼šå˜æˆåé¢çš„case 2ï¼Œcase 3ï¼Œæˆ–è€…case 4è¿›è¡Œå¤„ç†äº†ã€‚ä¸Šå‡æ“ä½œéœ€è¦å¯¹Cåšä¸€ä¸ªå·¦æ—‹æ“ä½œï¼Œå¦‚æœæ˜¯é•œåƒç»“æ„çš„æ ‘åªéœ€è¦åšå¯¹åº”çš„å³æ—‹æ“ä½œå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥è¦åšcase 1æ“ä½œæ˜¯å› ä¸ºå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œæ— æ³•å€Ÿåˆ°ä¸€ä¸ªé»‘èŠ‚ç‚¹æ¥å¡«è¡¥åˆ é™¤çš„é»‘èŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;![å›¾1](https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/p1.jpg)&quot; alt=&quot;å›¾1&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;æƒ…å†µ2&quot;&gt;æƒ…å†µ2&lt;/h4&gt;

&lt;p&gt;case 2çš„åˆ é™¤æ“ä½œæ˜¯ç”±äºå…„å¼ŸèŠ‚ç‚¹å¯ä»¥æ¶ˆé™¤ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹å’Œå…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼Œæ‰€ä»¥å¯ä»¥å°†å…„å¼ŸèŠ‚ç‚¹å˜çº¢ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ ‘çš„å±€éƒ¨çš„é¢œè‰²ç¬¦åˆå®šä¹‰äº†ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦å°†çˆ¶èŠ‚ç‚¹Aå˜æˆæ–°çš„èŠ‚ç‚¹ï¼Œç»§ç»­å‘ä¸Šè°ƒæ•´ï¼Œç›´åˆ°æ•´é¢—æ ‘çš„é¢œè‰²ç¬¦åˆRBTreeçš„å®šä¹‰ä¸ºæ­¢ã€‚&lt;/p&gt;

&lt;p&gt;case 2è¿™ç§æƒ…å†µä¸‹ä¹‹æ‰€ä»¥è¦å°†å…„å¼ŸèŠ‚ç‚¹å˜çº¢ï¼Œæ˜¯å› ä¸ºå¦‚æœæŠŠå…„å¼ŸèŠ‚ç‚¹å€Ÿè°ƒè¿‡æ¥ï¼Œä¼šå¯¼è‡´å…„å¼Ÿçš„ç»“æ„ä¸ç¬¦åˆRBTreeçš„å®šä¹‰ï¼Œè¿™æ ·çš„æƒ…å†µä¸‹åªèƒ½æ˜¯å°†å…„å¼ŸèŠ‚ç‚¹ä¹Ÿå˜æˆçº¢è‰²æ¥è¾¾åˆ°é¢œè‰²çš„å¹³è¡¡ã€‚å½“å°†å…„å¼ŸèŠ‚ç‚¹ä¹Ÿå˜çº¢ä¹‹åï¼Œè¾¾åˆ°äº†å±€éƒ¨çš„å¹³è¡¡äº†ï¼Œä½†æ˜¯å¯¹äºç¥–çˆ¶èŠ‚ç‚¹æ¥è¯´æ˜¯ä¸ç¬¦åˆå®šä¹‰4çš„ã€‚è¿™æ ·å°±éœ€è¦å›æº¯åˆ°çˆ¶èŠ‚ç‚¹ï¼Œæ¥ç€è¿›è¡Œä¿®å¤æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;![å›¾1](https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/p2.jpg)&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;æƒ…å†µ3&quot;&gt;æƒ…å†µ3&lt;/h4&gt;

&lt;p&gt;case 3çš„åˆ é™¤æ“ä½œæ˜¯ä¸€ä¸ªä¸­é—´æ­¥éª¤ï¼Œå®ƒçš„ç›®çš„æ˜¯å°†å·¦è¾¹çš„çº¢è‰²èŠ‚ç‚¹å€Ÿè°ƒè¿‡æ¥ï¼Œè¿™æ ·å°±å¯ä»¥è½¬æ¢æˆcase 4çŠ¶æ€äº†ï¼Œåœ¨case 4çŠ¶æ€ä¸‹å¯ä»¥å°†Dï¼ŒEèŠ‚ç‚¹éƒ½é˜¶æ®µè¿‡æ¥ï¼Œé€šè¿‡å°†ä¸¤ä¸ªèŠ‚ç‚¹å˜æˆé»‘è‰²æ¥ä¿è¯çº¢é»‘æ ‘çš„æ•´ä½“å¹³è¡¡ã€‚&lt;/p&gt;

&lt;p&gt;ä¹‹æ‰€ä»¥è¯´case-3æ˜¯ä¸€ä¸ªä¸­é—´çŠ¶æ€ï¼Œæ˜¯å› ä¸ºæ ¹æ®çº¢é»‘æ ‘çš„å®šä¹‰æ¥è¯´ï¼Œä¸‹å›¾å¹¶ä¸æ˜¯å¹³è¡¡çš„ï¼Œä»–æ˜¯é€šè¿‡case 2æ“ä½œå®Œåå‘ä¸Šå›æº¯å‡ºç°çš„çŠ¶æ€ã€‚ä¹‹æ‰€ä»¥ä¼šå‡ºç°case 3å’Œåé¢çš„case 4çš„æƒ…å†µï¼Œæ˜¯å› ä¸ºå¯ä»¥é€šè¿‡å€Ÿç”¨ä¾„å­èŠ‚ç‚¹çš„çº¢è‰²ï¼Œå˜æˆé»‘è‰²æ¥ç¬¦åˆçº¢é»‘æ ‘å®šä¹‰4.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;![å›¾1](https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/p3.jpg)&quot; alt=&quot;å›¾3&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;æƒ…å†µ4&quot;&gt;æƒ…å†µ4&lt;/h4&gt;

&lt;p&gt;Case 4çš„æ“ä½œæ˜¯çœŸæ­£çš„èŠ‚ç‚¹å€Ÿè°ƒæ“ä½œï¼Œé€šè¿‡å°†å…„å¼ŸèŠ‚ç‚¹ä»¥åŠå…„å¼ŸèŠ‚ç‚¹çš„å³èŠ‚ç‚¹å€Ÿè°ƒè¿‡æ¥ï¼Œå¹¶å°†å…„å¼ŸèŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹å˜æˆçº¢è‰²æ¥è¾¾åˆ°å€Ÿè°ƒä¸¤ä¸ªé»‘èŠ‚ç‚¹çš„ç›®çš„ï¼Œè¿™æ ·çš„è¯ï¼Œæ•´æ£µæ ‘è¿˜æ˜¯ç¬¦åˆRBTreeçš„å®šä¹‰çš„ã€‚&lt;/p&gt;

&lt;p&gt;Case 4è¿™ç§æƒ…å†µçš„å‘ç”Ÿåªæœ‰åœ¨å¾…åˆ é™¤çš„èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ä¸ºé»‘ï¼Œä¸”å­èŠ‚ç‚¹ä¸å…¨éƒ¨ä¸ºé»‘ï¼Œæ‰æœ‰å¯èƒ½å€Ÿè°ƒåˆ°ä¸¤ä¸ªèŠ‚ç‚¹æ¥åšé»‘èŠ‚ç‚¹ä½¿ç”¨ï¼Œä»è€Œä¿æŒæ•´æ£µæ ‘éƒ½ç¬¦åˆçº¢é»‘æ ‘çš„å®šä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;![å›¾1](https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/p4.jpg)&quot; alt=&quot;å›¾4&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;åˆ é™¤æ“ä½œçš„æ€»ç»“&quot;&gt;åˆ é™¤æ“ä½œçš„æ€»ç»“&lt;/h4&gt;

&lt;p&gt;çº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œæ˜¯æœ€å¤æ‚çš„æ“ä½œï¼Œå¤æ‚çš„åœ°æ–¹å°±åœ¨äºå½“åˆ é™¤äº†é»‘è‰²èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå¦‚ä½•ä»å…„å¼ŸèŠ‚ç‚¹å»å€Ÿè°ƒèŠ‚ç‚¹ï¼Œä»¥ä¿è¯æ ‘çš„é¢œè‰²ç¬¦åˆå®šä¹‰ã€‚ç”±äºçº¢è‰²çš„å…„å¼ŸèŠ‚ç‚¹æ˜¯æ²¡æ³•å€Ÿè°ƒå‡ºé»‘èŠ‚ç‚¹çš„ï¼Œè¿™æ ·åªèƒ½é€šè¿‡é€‰æ‹©æ“ä½œè®©ä»–ä¸Šå‡åˆ°çˆ¶èŠ‚ç‚¹ï¼Œè€Œç”±äºå®ƒæ˜¯çº¢èŠ‚ç‚¹ï¼Œæ‰€ä»¥å®ƒçš„å­èŠ‚ç‚¹å°±æ˜¯é»‘çš„ï¼Œå¯ä»¥å€Ÿè°ƒã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²èŠ‚ç‚¹çš„å¯ä»¥åˆ†æˆ3ç§æƒ…å†µæ¥å¤„ç†ï¼Œå½“æ‰€ä»¥çš„å…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²èŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ç›´æ¥å°†å…„å¼ŸèŠ‚ç‚¹å˜çº¢ï¼Œè¿™æ ·å±€éƒ¨çš„çº¢é»‘æ ‘é¢œè‰²æ˜¯ç¬¦åˆå®šä¹‰çš„ã€‚ä½†æ˜¯æ•´é¢—æ ‘ä¸ä¸€å®šæ˜¯ç¬¦åˆçº¢é»‘æ ‘å®šä¹‰çš„ï¼Œéœ€è¦å¾€ä¸Šè¿½æº¯ç»§ç»­è°ƒæ•´ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºå…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ºå·¦çº¢å³é»‘æˆ–è€… (å…¨éƒ¨ä¸ºçº¢ï¼Œå³çº¢å·¦é»‘)è¿™ä¸¤ç§æƒ…å†µï¼Œå¯ä»¥å…ˆå°†å‰é¢çš„æƒ…å†µé€šè¿‡é€‰æ‹©è½¬æ¢ä¸ºåä¸€ç§æƒ…å†µï¼Œåœ¨åä¸€ç§æƒ…å†µä¸‹ï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ä¸ºé»‘ï¼Œå…„å¼ŸèŠ‚ç‚¹çš„å³èŠ‚ç‚¹ä¸ºçº¢ï¼Œå¯ä»¥å€Ÿè°ƒå‡ºä¸¤ä¸ªèŠ‚ç‚¹å‡ºæ¥åšé»‘èŠ‚ç‚¹ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯åˆ é™¤äº†é»‘èŠ‚ç‚¹ï¼Œæ•´æ£µæ ‘è¿˜æ˜¯ç¬¦åˆçº¢é»‘æ ‘çš„å®šä¹‰çš„ï¼Œå› ä¸ºé»‘è‰²èŠ‚ç‚¹çš„ä¸ªæ•°æ²¡æœ‰æ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ä»£ç ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/** From CLR */
	private void fixAfterDeletion(Node x) {
		while (x != root &amp;amp;&amp;amp; colorOf(x) == BLACK) {
			if (x == leftOf(parentOf(x))) {
				Node uncle = rightOf(parentOf(x));

				if (colorOf(uncle) == RED) {
					setColor(uncle, BLACK);
					setColor(parentOf(x), RED);
					rotateLeft(parentOf(x));
					uncle = rightOf(parentOf(x));
				}

				if (colorOf(leftOf(uncle)) == BLACK &amp;amp;&amp;amp; colorOf(rightOf(uncle)) == BLACK) {
					setColor(uncle, RED);
					x = parentOf(x);
				} else {
					if (colorOf(rightOf(uncle)) == BLACK) {
						setColor(leftOf(uncle), BLACK);
						setColor(uncle, RED);
						rotateRight(uncle);
						uncle = rightOf(parentOf(x));
					}
					setColor(uncle, colorOf(parentOf(x)));
					setColor(parentOf(x), BLACK);
					setColor(rightOf(uncle), BLACK);
					rotateLeft(parentOf(x));
					x = root;
				}
			} else { // symmetric
				assert x == rightOf((parentOf(x)));
				Node brother = leftOf(parentOf(x));

				if (colorOf(brother) == RED) {
					setColor(brother, BLACK);
					setColor(parentOf(x), RED);
					rotateRight(parentOf(x));
					brother = leftOf(parentOf(x));
				}

				if (colorOf(rightOf(brother)) == BLACK &amp;amp;&amp;amp; colorOf(leftOf(brother)) == BLACK) {
					setColor(brother, RED);
					x = parentOf(x);
				} else {
					if (colorOf(leftOf(brother)) == BLACK) {
						setColor(rightOf(brother), BLACK);
						setColor(brother, RED);
						rotateLeft(brother);
						brother = leftOf(parentOf(x));
					}
					setColor(brother, colorOf(parentOf(x)));
					setColor(parentOf(x), BLACK);
					setColor(leftOf(brother), BLACK);
					rotateRight(parentOf(x));
					x = root;
				}
			}
		}

		setColor(x, BLACK);
	}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Tue, 06 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/06/hashmap/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/06/hashmap/</guid>
        
        <category>JDK</category>
        
        
      </item>
    
      <item>
        <title>æ²‰ä¸‹å¿ƒæ¥åˆ†æHashMapçš„æºç ï¼ˆå››ï¼‰çº¢é»‘æ ‘çš„æ’å…¥</title>
        <description>&lt;p&gt;ç†è§£äº†2-3æ ‘å’Œçº¢é»‘æ ‘çš„å¯¹åº”çš„å…³ç³»ï¼Œå†å»æ¢³ç†çº¢é»‘æ ‘çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå°±ä¼šæ›´åŠ çš„å®¹æ˜“ç†è§£å’Œè®°å¿†ä¸€ç‚¹ã€‚&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;çº¢é»‘æ ‘çš„æ’å…¥æ“ä½œ&quot;&gt;çº¢é»‘æ ‘çš„æ’å…¥æ“ä½œ&lt;/h3&gt;

&lt;h4 id=&quot;æƒ…å†µ1&quot;&gt;æƒ…å†µ1&lt;/h4&gt;

&lt;p&gt;å½“ä¸ºNullæ ‘çš„æ—¶å€™ï¼Œæ’å…¥ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;èŠ‚ç‚¹è®¾ç½®ä¸ºæ ¹èŠ‚ç‚¹ï¼Œè®¾ç½®ä¸ºé»‘è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt1.jpg&quot; alt=&quot;å›¾1&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;æƒ…å†µ2&quot;&gt;æƒ…å†µ2&lt;/h4&gt;
&lt;p&gt;å­˜åœ¨çˆ¶èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œæ’å…¥èŠ‚ç‚¹ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š2-3æ ‘ä¸Šé¢å°±æ˜¯æœ‰2èŠ‚ç‚¹å½¢æˆ3èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚
  2.1 æ’å…¥çš„æ˜¯å·¦èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æ¯”çˆ¶èŠ‚ç‚¹è¦å°ï¼Œç›´æ¥çš„æ’å…¥å³å¯,ä½†æ˜¯éœ€è¦è€ƒè™‘ç€è‰²çš„é—®é¢˜ã€‚å¦‚å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt2.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;2.2 å¦‚æœæ’å…¥çš„èŠ‚ç‚¹æ¯”çˆ¶èŠ‚ç‚¹å¤§ï¼Œå°±éœ€è¦å˜æ¢é¡ºåºï¼Œå¤–åŠ æ”¹å˜é¢œè‰²äº†ï¼Œå¦‚ä¸‹å›¾ï¼š
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt3.jpg&quot; alt=&quot;å›¾3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­çš„åæ—‹è½¬ï¼Œä½¿ç”¨æ–‡å­—æè¿°ä¸ºï¼š&lt;/p&gt;

&lt;p&gt;å·¦æ—‹ï¼š å³èŠ‚ç‚¹ï¼ˆrightï¼‰å’Œå…¶çˆ¶èŠ‚ç‚¹ï¼ˆright-parentï¼‰è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢çš„è¿‡ç¨‹ä¸­ï¼Œright-parent çš„å³åˆ†æ”¯è¢«å¼ºåˆ¶çš„å‰å¼€ï¼Œæ‰€ä»¥æŠŠrightçš„å·¦å­©å­ï¼ˆright-leftï¼‰æ”¾åˆ°äº†right-parent çš„å³åˆ†æ”¯ï¼Œç„¶åæŠŠright-parent æ”¾åˆ°äº†rightçš„å·¦å­©å­ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;å›¾ç‰‡çš„æè¿°ä¸ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt4.jpg&quot; alt=&quot;å›¾4&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»£ç æè¿°ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** From CLR
 *  æ—‹è½¬èŠ‚ç‚¹ï¼šä¸º p.right
 *  æ–¹æ³•çš„è¾“å…¥çš„å‚æ•°ä¸º æ—‹è½¬å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¯ä»¥ç†è§£ä¸ºå›¾ä¸­çš„nodeèŠ‚ç‚¹
 * */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rotateLeft&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// pçš„å³èŠ‚ç‚¹å³æ˜¯æ—‹è½¬ä¸Šå‡çš„èŠ‚ç‚¹ï¼Œç„¶åæ—‹è½¬ä¸Šå‡åï¼Œè¯¥èŠ‚ç‚¹çš„å·¦èŠ‚ç‚¹ä¸ºPï¼ŒåŸæ¥çš„å·¦èŠ‚ç‚¹ï¼Œè¿™æ˜¯ä¸ºpçš„å³èŠ‚ç‚¹&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// è®¾ç½®å¾ªè½¬èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Œä»¥åŠPåŸæ¥çˆ¶èŠ‚ç‚¹çš„æŒ‡å‘çš„è®¾ç½®&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//æ—‹è½¬èŠ‚ç‚¹ä¸ºå³èŠ‚ç‚¹ï¼ŒåŸæ¥çš„å·¦å­©å­è®¾ç½®ä¸ºP&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;æƒ…å†µ3&quot;&gt;æƒ…å†µ3&lt;/h4&gt;
&lt;p&gt;åœ¨çˆ¶èŠ‚ç‚¹å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå¦‚æœå·¦å­©å­çš„å·¦å­©å­ä¸€ç›´æ’å…¥çš„æƒ…å†µä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt5.jpg&quot; alt=&quot;å›¾5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ—¶å€™å°±æ˜¯å³æ—‹çš„æ“ä½œï¼Œå…·ä½“çš„æ–‡å­—æè¿°ä¸ºï¼š&lt;/p&gt;

&lt;p&gt;å³æ—‹ï¼š å·¦èŠ‚ç‚¹ï¼ˆleftï¼‰å’Œå…¶çˆ¶èŠ‚ç‚¹ï¼ˆleft-parentï¼‰è¿›è¡Œäº¤æ¢ï¼Œäº¤æ¢çš„è¿‡ç¨‹ä¸­ï¼Œleft-parent çš„å·¦åˆ†æ”¯è¢«å¼ºåˆ¶çš„å‰å¼€ï¼Œæ‰€ä»¥æŠŠleftçš„å³å­©å­ï¼ˆleft-rightï¼‰æ”¾åˆ°äº†left-parent çš„å·¦åˆ†æ”¯ï¼Œç„¶åæŠŠleft-parent æ”¾åˆ°äº†leftçš„å·¦å­©å­ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„å›¾ç¤ºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt6.jpg&quot; alt=&quot;å›¾6&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…·ä½“çš„ä»£ç ç¤ºä¾‹ä¸ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/** From CLR
	 * è¯¥æ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ä¸æ˜¯è¢«æ—‹è½¬çš„èŠ‚ç‚¹ï¼Œè€Œæ˜¯è°ƒæ•´å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå¯ä»¥ç†è§£ä¸ºå›¾ä¸­çš„nodeèŠ‚ç‚¹
	 * */&lt;/span&gt;
	&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rotateRight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;c1&quot;&gt;// pçš„å·¦èŠ‚ç‚¹è®¾ç½®ä¸º åŸæ¥å·¦èŠ‚ç‚¹çš„å³å­æ ‘&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

			&lt;span class=&quot;c1&quot;&gt;// æ—‹è½¬è¿‡ç¨‹ä¸­çˆ¶èŠ‚ç‚¹çš„è®¾ç½®ï¼Œä¸Šå‡èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä»¥åŠåŸæ¥çˆ¶èŠ‚ç‚¹çš„æŒ‡å‘çš„è®¾ç½®&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

			&lt;span class=&quot;c1&quot;&gt;// æœ€åå³èŠ‚ç‚¹å’Œpæ—‹è½¬åçˆ¶èŠ‚ç‚¹çš„è®¾ç½®&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;æƒ…å†µ4&quot;&gt;æƒ…å†µ4ï¼š&lt;/h4&gt;
&lt;p&gt;ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œå¦‚ï¼šçº¢è‰²çš„å³èŠ‚ç‚¹ä¸‹æ’å…¥å·¦å­©å­ï¼Œæˆ–è€…çº¢è‰²çš„å·¦èŠ‚ç‚¹ä¸‹ï¼Œæ’å…¥å³å­©å­ã€‚
å…·ä½“çš„æƒ…å†µçš„ä¸€ç§å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt7.jpg&quot; alt=&quot;å›¾7&quot; /&gt;
é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œç¬¬ä¸€æ­¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€æ¬¡å·¦æ—‹è½¬ï¼Œå˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„æƒ…å†µ3.å…·ä½“çš„æ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt8.jpg&quot; alt=&quot;å›¾8&quot; /&gt;&lt;/p&gt;
&lt;h3 id=&quot;æ’å…¥çš„æƒ…å†µæ€»ç»“&quot;&gt;æ’å…¥çš„æƒ…å†µæ€»ç»“&lt;/h3&gt;

&lt;p&gt;å…·ä½“çš„æ“ä½œåˆ†ä¸ºä¸‰ç§ï¼šå·¦æ—‹ï¼Œå³æ—‹ï¼Œå˜è‰²
å…·ä½“çš„æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/tt9.jpg&quot; alt=&quot;å›¾9&quot; /&gt;
å…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public int put(K key) {
		Node t = root;
		if (t == null) {
			root = new Node(key, null);
			size = 1;
			modCount++;
			return 1;
		}

		Node parent = findParent(key);
		if (parent != null) {
			int cmp = this.comparator != null ? this.comparator.compare(key, parent.key)
					: ((Comparable&amp;lt;? super K&amp;gt;) key).compareTo(parent.key);
			Node e = new Node(key, parent);
			if (cmp &amp;lt; 0)
				parent.left = e;
			else
				parent.right = e;
			fixAfterInsertion(e);
			size++;
			modCount++;
			return 1;
		} else {
			return -1;
		}
	}

  private void fixAfterInsertion(Node x) {
		x.color = RED;
		// x ä¸ºnullï¼Œxä¸ºrootçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç›´æ¥çš„è·³èµ°
		/**
		 * å¦‚æœx parent èŠ‚ç‚¹ä¸ºé»‘ï¼Œé‚£ä¹ˆx ä¸ºçº¢ï¼Œç›´æ¥çš„è·³è¿‡å³å¯ã€‚
		 * */
		while (x != null &amp;amp;&amp;amp; x != root &amp;amp;&amp;amp; x.parent.color == RED) {
			if (parentOf(x) == leftOf(parentOf(parentOf(x)))) {
				Node uncle = rightOf(parentOf(parentOf(x)));
				if (colorOf(uncle) == RED) {
					// å›¾ä¸‰
					setColor(parentOf(x), BLACK);
					setColor(uncle, BLACK);
					setColor(parentOf(parentOf(x)), RED);
					x = parentOf(parentOf(x));
				} else {
					// uncle èŠ‚ç‚¹ä¸ºé»‘æˆ–è€…uncle èŠ‚ç‚¹ä¸ºnull
					if (x == rightOf(parentOf(x))) {
						x = parentOf(x);
						/**
						 * è¿™ä¸ªæ“ä½œï¼Œéå¸¸çš„æœ‰æ„æ€ï¼ŒæŒ‰ç…§å·¦æ—‹æ–¹æ³•çš„å®šä¹‰ï¼Œå‚æ•°åº”è¯¥æ˜¯æ—‹è½¬å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä½†æ˜¯è¿™ä¸ªä¼ å…¥çš„æ˜¯æ—‹è½¬èŠ‚ç‚¹
						 * ç„¶åï¼Œå°±å˜æˆäº†ï¼šxå³èŠ‚ç‚¹å’Œxäº¤æ¢ä½ç½®ï¼Œå¹¶ä¸”åœ¨äº¤æ¢ä½ç½®çš„è¿‡ç¨‹ä¸­ï¼Œxæœ‰å³èŠ‚ç‚¹å˜ä¸ºäº†å·¦èŠ‚ç‚¹ã€‚
						 * å›¾â‘¡
						 * */
						rotateLeft(x);
					}
					// è°ƒæ•´é¢œè‰²ï¼Œå½“å‰èŠ‚ç‚¹ä¸ºçº¢è‰²èŠ‚ç‚¹ï¼Œæ˜¯å®šæ­»çš„ã€‚æ‰€ä»¥æŠŠçˆ¶èŠ‚ç‚¹è®¾ä¸ºé»‘ï¼Œçˆ·èŠ‚èŠ‚ç‚¹è®¾ç½®ä¸ºçº¢
					setColor(parentOf(x), BLACK);
					setColor(parentOf(parentOf(x)), RED);
					// x ä¸ºleftèŠ‚ç‚¹ï¼Œè¿›è¡Œå³æ—‹
					// å›¾â‘ 
					rotateRight(parentOf(parentOf(x)));
				}
			} else {
				Node uncle = leftOf(parentOf(parentOf(x)));
				if (colorOf(uncle) == RED) {
					setColor(parentOf(x), BLACK);
					setColor(uncle, BLACK);
					setColor(parentOf(parentOf(x)), RED);
					x = parentOf(parentOf(x));
				} else {
					if (x == leftOf(parentOf(x))) {
						x = parentOf(x);
						rotateRight(x);
					}
					setColor(parentOf(x), BLACK);
					setColor(parentOf(parentOf(x)), RED);
					rotateLeft(parentOf(parentOf(x)));
				}
			}
		}
		root.color = BLACK;
	}

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Mon, 05 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/05/hashmap/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/05/hashmap/</guid>
        
        <category>JDK</category>
        
        
      </item>
    
      <item>
        <title>æ²‰ä¸‹å¿ƒæ¥åˆ†æHashMapçš„æºç ï¼ˆä¸‰ï¼‰å­¦ä¹ çº¢é»‘æ ‘</title>
        <description>&lt;p&gt;HashMapçš„æºç åœ¨JDK 1.8åå¼•å…¥äº†çº¢é»‘æ ‘ï¼Œä½†æ˜¯çœ‹åˆ°çº¢é»‘æ ‘çš„å®šä¹‰ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯çº¢è‰²ï¼Œæˆ–è€…æ˜¯é»‘è‰²&lt;/li&gt;
  &lt;li&gt;æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²&lt;/li&gt;
  &lt;li&gt;æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹(æœ€åçš„ç©ºèŠ‚ç‚¹)æ˜¯é»‘è‰²çš„&lt;/li&gt;
  &lt;li&gt;å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆå®ƒçš„å­©å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„&lt;/li&gt;
  &lt;li&gt;ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å®Œå…¨çš„ä¸æ¸…æ¥šä¸ºä»€ä¹ˆè¿™ä¹ˆå®šä¹‰ï¼Œä»¥åŠè¿™ä¹ˆå®šä¹‰çš„åŸå› æ˜¯ä»€ä¹ˆã€‚&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;å…ˆå¯¼&quot;&gt;å…ˆå¯¼&lt;/h3&gt;

&lt;p&gt;å…ˆè¯´çº¢é»‘æ ‘çš„ç”±æ¥ï¼Œæ˜¯ä¸ºäº†æŸ¥æ‰¾çš„å¹³è¡¡ï¼Œä»äºŒå‰æŸ¥æ‰¾æ ‘è¯´èµ·ã€‚&lt;/p&gt;

&lt;p&gt;äºŒå‰æŸ¥æ‰¾æ ‘ï¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå·¦èŠ‚ç‚¹çš„å€¼å°äºæ ¹èŠ‚ç‚¹ï¼Œå³èŠ‚ç‚¹çš„å€¼å¤§äºå³èŠ‚ç‚¹ã€‚å¹¶ä¸”æ¯ä¸€é¢—å­æ ‘éƒ½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œæ‰€ä»¥ä¾¿äºæŸ¥æ‰¾ï¼šæŸ¥æ‰¾çš„æ—¶å€™ï¼Œåªéœ€è¦æ¯”å¯¹å°±èƒ½å¤Ÿç¬é€Ÿçš„æ‰¾åˆ°æ‰€åœ¨å­æ ‘ï¼Œç»§è€Œæ‰¾åˆ°å¯¹åº”çš„èŠ‚ç‚¹ã€‚ä½†æ˜¯äºŒå‰æŸ¥æ‰¾æ ‘æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼šå®¹æ˜“åå‘ä¸€ä¾§ï¼Œæˆ‘ä»¬å‘å¾€çš„äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯å›¾ä¸€ï¼Œç»“æœå´æœ‰å¾ˆå¤šå›¾äºŒçš„æƒ…å†µã€‚
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t1.jpg&quot; alt=&quot;å›¾1&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t2.jpg&quot; alt=&quot;å›¾2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å¹³è¡¡æ ‘2-3æ ‘&quot;&gt;å¹³è¡¡æ ‘ï¼š2-3æ ‘&lt;/h3&gt;
&lt;p&gt;åœ¨è¿™ç§éœ€æ±‚ä¸‹ï¼Œå¹³è¡¡æ ‘çš„æ¦‚å¿µå°±åº”è¿è€Œç”Ÿäº†ã€‚çº¢é»‘æ ‘å°±æ˜¯ä¸€ç§å¹³è¡¡æ ‘ï¼Œå®ƒå¯ä»¥ä¿è¯äºŒå‰æ ‘åŸºæœ¬ç¬¦åˆæˆ‘ä»¬é¢„æ–™çš„é‚£ç§å¹³è¡¡çš„ç»“æ„ï¼Œä½†æ˜¯ç†è§£çº¢é»‘æ ‘ä¹‹å‰ï¼Œå¿…é¡»å…ˆäº†è§£å¦ä¸€ç§æ ‘ï¼Œå«2-3æ ‘ï¼Œçº¢é»‘æ ‘èƒŒåçš„é€»è¾‘å°±æ˜¯å®ƒã€‚&lt;/p&gt;

&lt;p&gt;2-3æ ‘ï¼š2-3æ ‘æ»¡è¶³äºŒåˆ†æœç´¢æ ‘çš„æ€§è´¨ã€‚ä¸åŒçš„æ˜¯åœ¨2-3æ ‘ä¸­ï¼Œå­˜åœ¨ä¸¤ç§èŠ‚ç‚¹ã€‚ä¸€ç§æ˜¯æœ‰ä¸¤ä¸ªå¶å­èŠ‚ç‚¹çš„ï¼Œæˆ‘ä»¬ç§°ä½œâ€œ2èŠ‚ç‚¹â€ å¦‚å›¾3ï¼›å¦ä¸€ç§æ˜¯æœ‰ä¸‰ä¸ªå¶å­èŠ‚ç‚¹çš„ï¼Œæˆ‘ä»¬ç§°ä½œâ€œ3èŠ‚ç‚¹â€ï¼Œå¦‚å›¾4ï¼Œå›¾5å±•ç¤ºçš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„2-3 æ ‘ï¼Œæ»¡è¶³ä»æ ¹èŠ‚ç‚¹åˆ°ä»»æ„ä¸€ä¸ªå¶å­èŠ‚ç‚¹çš„é«˜åº¦éƒ½æ˜¯ç›¸åŒçš„ã€‚
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t3.jpg&quot; alt=&quot;å›¾3&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t4.jpg&quot; alt=&quot;å›¾4&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t5.jpg&quot; alt=&quot;å›¾5&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2-3æ ‘å¦‚ä½•ä¿æŒå¹³è¡¡&quot;&gt;2-3æ ‘å¦‚ä½•ä¿æŒå¹³è¡¡&lt;/h3&gt;

&lt;p&gt;2-3æ ‘å¹³è¡¡çš„ä¿æŒï¼Œä¸»è¦ä¾èµ–ä¸¤ä¸ªæ“ä½œï¼šæ‹†åˆ†å’Œåˆå¹¶ã€‚å…¶ä¸­æ‹†åˆ†ä¸»è¦å‘ç”Ÿåœ¨3èŠ‚ç‚¹æ’å…¥æ—¶å€™ï¼Œå¦‚ä¸‹å›¾6ï¼Œå›¾7å®Œæ•´çš„å±•ç¤ºå¯ä¸€ä¸ªæŸ¥åˆ†çš„è¿‡ç¨‹ï¼š
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t6.jpg&quot; alt=&quot;å›¾6&quot; /&gt;
&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t7.jpg&quot; alt=&quot;å›¾7&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ‹†åˆ†çš„è¿‡ç¨‹ä¸»è¦æ˜¯å½¢æˆäº†ä¸€ä¸ª4èŠ‚ç‚¹ï¼ˆç±»ä¼¼äº2èŠ‚ç‚¹ï¼Œ3èŠ‚ç‚¹çš„æ¦‚å¿µï¼‰ï¼Œ(4 7 9) è¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶åé€šè¿‡4èŠ‚ç‚¹çš„ä¸­é—´çŠ¶æ€æŸ¥åˆ†ä¸ºä¸‰ä¸ª2èŠ‚ç‚¹. &lt;br /&gt;
ä½†æ˜¯åœ¨å›¾7çš„ç¬¬äºŒæ­¥ï¼Œæ‹†åˆ†è¿‡åçš„2-3æ ‘å·²ç»ä¸æ»¡è¶³ï¼šä»æ ¹èŠ‚ç‚¹åˆ°ä»»æ„çš„å¶å­èŠ‚ç‚¹çš„é«˜åº¦æ˜¯å®Œå…¨ä¸€è‡´çš„å¹³è¡¡æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åˆå¹¶çš„æ“ä½œï¼Œå¦‚å›¾7ä¸­çš„ç¬¬ä¸‰æ­¥ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœåˆå¹¶è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å››èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†æ¬¡çš„æŸ¥åˆ†ï¼Œè¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥æ··åˆä½¿ç”¨ï¼Œå¦‚å›¾8.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t8.jpg&quot; alt=&quot;å›¾8&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2-3æ ‘å’Œçº¢é»‘æ ‘çš„å…³ç³»&quot;&gt;2-3æ ‘å’Œçº¢é»‘æ ‘çš„å…³ç³»&lt;/h3&gt;

&lt;p&gt;å¯¹äº2-3æ ‘ä¸­çš„â€œ2èŠ‚ç‚¹â€ï¼Œå¯¹åº”äºçº¢é»‘æ ‘ä¸­çš„â€œé»‘èŠ‚ç‚¹â€ï¼Œå³ç›¸å½“äºæ™®é€šäºŒåˆ†æœç´¢æ ‘ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äº2-3æ ‘ä¸­çš„â€œ3èŠ‚ç‚¹â€ï¼Œç›¸å½“äºæ™®é€šäºŒåˆ†æœç´¢æ ‘ä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹èåˆåœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥æè¿°è¿™ç§èåˆåœ¨ä¸€èµ·çš„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å…¶å®å¾ˆç®€å•ï¼Œå¦‚æœæˆ‘ä»¬å°†è¿æ¥è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„è¾¹æ¶‚æˆçº¢è‰²ï¼Œå°±å¯ä»¥è¡¨ç¤ºè¿™ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯èåˆçš„å…³ç³»ï¼Œå³2-3æ ‘ä¸­çš„ä¸€ä¸ªâ€œ3èŠ‚ç‚¹â€ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºæ ‘è¿™ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬åœ¨å®šä¹‰çš„æ—¶å€™é€šå¸¸éƒ½æ˜¯é’ˆå¯¹èŠ‚ç‚¹è¿›è¡Œå®šä¹‰ï¼Œå¹¶æ²¡æœ‰å¯¹èŠ‚ç‚¹ä¹‹é—´çš„è¾¹è¿›è¡Œå®šä¹‰ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥è¡¨ç¤ºè¿™æ¡è¢«æ¶‚æˆçº¢è‰²çš„è¾¹å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¤§å®¶éƒ½çŸ¥é“ï¼Œå¯¹äºæ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéƒ½æ˜¯åªæœ‰ä¸€ä¸ªçˆ¶äº²èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸å…¶çˆ¶èŠ‚ç‚¹ç›¸è¿æ¥çš„è¾¹å¯ä»¥ç”¨è¯¥èŠ‚ç‚¹è¿›è¡Œè¡¨ç¤ºã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸­è¾ƒå°çš„èŠ‚ç‚¹ï¼ˆä½œä¸ºå·¦å­æ ‘çš„èŠ‚ç‚¹ï¼‰æ¶‚æˆçº¢è‰²ï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°è¡¨ç¤ºè¿™ä¸¤ä¸ªèŠ‚ç‚¹èåˆçš„å…³ç³»äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t9.jpg&quot; alt=&quot;å›¾8&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åä¸€é¢—2-3æ ‘çš„å°±å¯ä»¥è½¬åŒ–ä¸ºä¸€é¢—çº¢é»‘æ ‘äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/t10.jpg&quot; alt=&quot;å›¾8&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å†æ¬¡çš„åˆ†æçº¢é»‘æ ‘çš„æ€§è´¨&quot;&gt;å†æ¬¡çš„åˆ†æçº¢é»‘æ ‘çš„æ€§è´¨&lt;/h3&gt;

&lt;p&gt;è®¨è®ºäº†2-3æ ‘ä¸çº¢é»‘æ ‘ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å†å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹çº¢é»‘æ ‘çš„5æ¡å®šä¹‰å’Œæ€§è´¨ï¼Œä¼šå‘ç°å¾ˆå¥½ç†è§£äº†ã€‚&lt;/p&gt;

&lt;p&gt;1.æ¯ä¸ªèŠ‚ç‚¹æˆ–è€…æ˜¯çº¢è‰²ï¼Œæˆ–è€…æ˜¯é»‘è‰²
è¿™æ¡å®šä¹‰å¾ˆå¥½ç†è§£ï¼Œåœ¨æ­¤ä¸åšè§£é‡Šã€‚&lt;/p&gt;

&lt;p&gt;2.æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²&lt;/p&gt;

&lt;p&gt;æ ¹æ®ä¹‹å‰è¯´è¿‡çš„ï¼Œçº¢è‰²çš„èŠ‚ç‚¹å¯¹åº”äº2-3æ ‘ä¸­â€œ3èŠ‚ç‚¹â€ä¸­è¾ƒå°çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œæ‹†æˆä¸¤ä¸ªâ€œ2èŠ‚ç‚¹â€çš„è¯åˆ™æ˜¯ä¸€ä¸ªå·¦å­æ ‘çš„èŠ‚ç‚¹ï¼Œå³&lt;strong&gt;çº¢è‰²çš„èŠ‚ç‚¹æ€»æ˜¯å¯ä»¥å’Œå…¶çˆ¶èŠ‚ç‚¹è¿›è¡Œèåˆ&lt;/strong&gt;ï¼Œæ‰€ä»¥çº¢è‰²èŠ‚ç‚¹ä¸€å®šæœ‰çˆ¶èŠ‚ç‚¹ï¼Œæ˜¾ç„¶æ ¹èŠ‚ç‚¹ä¸èƒ½æ˜¯çº¢è‰²ï¼Œæ‰€ä»¥æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚&lt;/p&gt;

&lt;p&gt;3.æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹(æœ€åçš„ç©ºèŠ‚ç‚¹)æ˜¯é»‘è‰²çš„&lt;/p&gt;

&lt;p&gt;è¿™æ¡æ€§è´¨å’Œç¬¬2æ¡æ˜¯å¯¹åº”çš„ã€‚å¯¹äºå¶å­èŠ‚ç‚¹ï¼ˆæœ€åçš„ç©ºèŠ‚ç‚¹ï¼‰ï¼Œä¸€é¢—ç©ºæ ‘çš„æ ¹èŠ‚ç‚¹ä¹Ÿä¸ºé»‘è‰²ï¼Œæ‰€ä»¥ä¸å…¶è¯´ç¬¬ä¸‰æ¡æ˜¯ä¸€æ¡æ€§è´¨ï¼Œä¸å¦‚è¯´ä¹Ÿæ˜¯ä¸€ä¸ªå®šä¹‰ã€‚&lt;/p&gt;

&lt;p&gt;4.å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œé‚£ä¹ˆå®ƒçš„å­©å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„&lt;/p&gt;

&lt;p&gt;æ ¹æ®ä¸Šé¢2-3æ ‘ä¸çº¢é»‘æ ‘ä¸¤ç§èŠ‚ç‚¹çš„å¯¹æ¯”å›¾ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘ï¼Œå¯¹åº”2-3æ ‘ä¸­çš„è¯ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªâ€œ2èŠ‚ç‚¹â€ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªâ€œ3èŠ‚ç‚¹â€ï¼Œè€Œä¸ç®¡æ˜¯â€œ2èŠ‚ç‚¹â€è¿˜æ˜¯â€œ3èŠ‚ç‚¹â€ï¼Œç›¸è¿çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼Œæ‰€ä»¥è¯´çº¢è‰²èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ã€‚&lt;/p&gt;

&lt;p&gt;5.ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„&lt;/p&gt;

&lt;p&gt;æ ¹æ®2-3æ ‘ä¸çº¢é»‘æ ‘çš„å…³ç³»å¯¹æ¯”å›¾ï¼Œå¯ä»¥å‘ç°ï¼Œçº¢é»‘æ ‘ä¸­ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹å¯¹åº”2-3æ ‘ä¸­ä¸€æ•´ä¸ªèŠ‚ç‚¹ï¼ˆâ€œ2èŠ‚ç‚¹â€æˆ–â€œ3èŠ‚ç‚¹â€ï¼‰ï¼Œè€Œ2-3æ ‘æ˜¯å®Œå…¨å¹³è¡¡çš„æ ‘ï¼Œä»æ ¹èŠ‚ç‚¹åˆ°ä»»æ„è·¯å¾„çš„å¶å­èŠ‚ç‚¹ï¼Œç»è¿‡çš„èŠ‚ç‚¹ä¸ªæ•°éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¯¹åº”çº¢é»‘æ ‘ä¸­ï¼Œå³ä»ä»»æ„èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹æ¯”2-3æ ‘æ€»ç»“èµ·æ¥ï¼Œå…¶å®ä¹Ÿå°±ä¸¤æ¡ã€‚å…¶ä¸­ä¸€æ¡æ˜¯å…³äºç€è‰²çš„ï¼šæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰é¢œè‰²ï¼Œéçº¢å³é»‘ã€‚æ ¹èŠ‚ç‚¹ï¼Œå¶å­èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚çº¢è‰²èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹ä¸ºé»‘è‰²ã€‚å¦å¤–ä¸€æ¡æ˜¯å…³äº2-3æ ‘çš„å¹³è¡¡æ€§çš„ã€‚å³æ˜¯åˆ°æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹æ˜¯å¹³è¡¡çš„ï¼Œå¯¹åº”çš„çº¢é»‘æ ‘ï¼Œä¹Ÿå°±æ˜¯ç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;
</description>
        <pubDate>Sun, 04 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/04/hashmap0/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/04/hashmap0/</guid>
        
        <category>JDK</category>
        
        
      </item>
    
      <item>
        <title>æ²‰ä¸‹å¿ƒæ¥åˆ†æHashMapçš„æºç ï¼ˆäºŒï¼‰</title>
        <description>&lt;p&gt;HashMapçš„æºç åœ¨JDK 1.8 çš„Putå’ŒRemoveæ“ä½œã€‚&lt;/p&gt;

&lt;!--more--&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;cm&quot;&gt;/**
   * Implements Map.put and related methods.
   * puté€»è¾‘ï¼š
   * 	1. æ£€æŸ¥hashmapä¸­çš„tableæ˜¯å¦éœ€è¦æ‰©å®¹
   * 	2.1 ç¡®å®šæ”¾å…¥çš„å€¼çš„ä½ç½®ï¼š(n - 1) &amp;amp; hashï¼Œhashçš„è®¡ç®—æ–¹å¼ï¼š(h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; 16)
   * 	2.2 å¦‚æœè¯¥ä½ç½®æ²¡æœ‰å€¼ï¼Œç›´æ¥çš„æ–°å»ºNodeï¼Œè®¾ç½®keyï¼Œvalueå€¼ï¼Œæ”¾å…¥table
   * 	2.3 å¦‚æœè¯¥ä½ç½®æœ‰Nodeå€¼ï¼Œåˆ¤æ–­keyå€¼æœ‰å¦ç›¸åŒ
   * 		2.3.1  ç›¸åŒåˆ™æ˜¯æ›¿æ¢valueå€¼
   *     2.3.2  ä¸ç›¸åŒåˆ™æ˜¯åˆ¤æ–­Nodeå€¼çš„ç±»å‹
   *     		2.3.2.1 å¦‚æœNodeå€¼çš„ç±»æ€§æ˜¯ï¼šTreeNodeï¼Œæ ‡è¯†ä¸ºä¸€é¢—çº¢é»‘æ ‘çš„ç±»å‹ï¼Œè°ƒç”¨putTreeVal
   */&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;putVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onlyIfAbsent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;evict&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;cm&quot;&gt;/* n ä»£è¡¨çš„æ˜¯åŸå§‹çš„hashmapä¸­ table çš„ lengthå€¼*/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;c1&quot;&gt;//æ‰©å®¹&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// &amp;amp; å€¼çš„è¿ç®—ï¼šå¾—åˆ°çš„å€¼åªå¯èƒ½æ¯”n-1å°,å¦‚æœtable[i]ä¸ºnull,ç›´æ¥çš„èµ‹å€¼å³å¯ã€‚&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//â‘ &lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;c1&quot;&gt;// p=table[i]; hashå€¼ç›¸åŒï¼Œkå€¼å’Œpçš„keyå€¼ä¸€æ ·ï¼Œç›´æ¥çš„æ›¿æ¢&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//â‘¡&lt;/span&gt;
             &lt;span class=&quot;c1&quot;&gt;//æ›¿æ¢valueå€¼&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//â‘¢&lt;/span&gt;
             &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæœ‰å€¼ï¼Œå¹¶ä¸”Nodeçš„ç±»å‹æ˜¯TreeNodeç±»å‹ï¼Œè°ƒç”¨TreeNodeçš„putTreeVal&lt;/span&gt;
             &lt;span class=&quot;c1&quot;&gt;// TODO æš‚æ—¶çš„æ”¾å¼ƒè¿™ä¸ªåˆ†æ”¯çš„åˆ†æ&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putTreeVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// â‘£&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å¦‚æœä¸æ˜¯TreeNodeï¼Œé‚£å°±æ˜¯ä¸€ä¸ªé“¾è¡¨çš„ç±»å‹&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;binCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                      &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                      &lt;span class=&quot;c1&quot;&gt;// å¦‚æœè¾¾åˆ°äº†7ä¸ªï¼Œå¼€å§‹å˜æ¢æ•°æ®ç»“æ„&lt;/span&gt;
                      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TREEIFY_THRESHOLD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// -1 for 1st&lt;/span&gt;
                          &lt;span class=&quot;c1&quot;&gt;//ä¼ å…¥çš„å‚æ•°ç«Ÿç„¶æ˜¯tableå’Œhashå€¼&lt;/span&gt;
                          &lt;span class=&quot;n&quot;&gt;treeifyBin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                      &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                  &lt;span class=&quot;c1&quot;&gt;//4.2&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))))&lt;/span&gt;
                      &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                  &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
              &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// existing mapping for key&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onlyIfAbsent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//               afterNodeAccess(e);&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;afterNodeInsertion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evict&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™é‡Œé¢æœ€é‡è¦çš„å°±æ˜¯â‘¢ å’Œ â‘£ ä¸¤ç§æƒ…å†µï¼Œå…¶ä¸­4ç§çš„ &lt;strong&gt;treeifyBin(tab, hash)&lt;/strong&gt;  ä¼šé¦–å…ˆè¢«è§¦å‘ï¼Œåœ¨é“¾è¡¨å…ƒç´ ä¸ºä¸ƒçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;k0 -&amp;gt; k1 -&amp;gt; k2 -&amp;gt; k3 -&amp;gt; k4 -&amp;gt; k5 -&amp;gt; k6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åœ¨k6 åŠ å…¥çš„æ—¶å€™ï¼ŒèŠ‚ç‚¹åˆ°è¾¾äº†7ä¸ªçš„æ—¶å€™ï¼Œè§¦å‘ï¼štreeifyBin&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public final void treeifyBin(Node&amp;lt;K,V&amp;gt;[] tab, int hash) {
  	 	this.table = tab;
       int n, index; Node&amp;lt;K,V&amp;gt; e;
//       if (tab == null || (n = tab.length) &amp;lt; MIN_TREEIFY_CAPACITY)
       if (tab == null || (n = tab.length) &amp;lt; 1)
           resize();
       else if ((e = tab[index = (n - 1) &amp;amp; hash]) != null) {
           TreeNode&amp;lt;K,V&amp;gt; hd = null, tl = null;
           // å…ˆæŠŠNodeèŠ‚ç‚¹å…¨éƒ¨çš„è½¬åŒ–ä¸ºTreeNodeèŠ‚ç‚¹
           do {
               TreeNode&amp;lt;K,V&amp;gt; p = replacementTreeNode(e, null);
               if (tl == null)
                   hd = p;
               else {
                   p.prev = tl;
                   tl.next = p;
               }
               tl = p;
           } while ((e = e.next) != null);

           // æ­¤æ—¶çš„hdä¸º0-&amp;gt;1-&amp;gt;2-&amp;gt;3-&amp;gt;...-&amp;gt;end ä¸ºé“¾è¡¨çš„æ•°æ®ç»“æ„
           if ((tab[index] = hd) != null)
          	 	 // é“¾çŠ¶çš„TreeNodeèŠ‚ç‚¹è½¬ä¸ºä¸ºæ ‘çŠ¶
               hd.treeify(tab);
       }
   }
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªæ–¹æ³•æœ€ä¸»è¦çš„ä¸€ç‚¹æ˜¯é€šè¿‡ä¸€ä¸ª do while å¾ªç¯æŠŠNodeèŠ‚ç‚¹è½¬åŒ–ä¸ºTreeNodeèŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œçº¢é»‘æ ‘è½¬åŒ–ï¼Œè°ƒç”¨ï¼štreeifyã€‚&lt;/p&gt;

&lt;p&gt;ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°â‘¢çš„ç±»å‹åˆ¤æ–­çš„é€»è¾‘äº†ï¼Œå¦‚æœèŠ‚ç‚¹æ˜¯TreeNodeèŠ‚ç‚¹çš„ç±»å‹ï¼Œé‚£ä¹ˆæ•°ç»„å†…å­˜å‚¨çš„å°±æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘äº†ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;if (p instanceof TreeNode)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç›´æ¥çš„è°ƒç”¨ï¼Œçº¢é»‘æ ‘çš„æ’å…¥æ“ä½œäº†ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;e = ((TreeNode&amp;lt;K,V&amp;gt;)p).putTreeVal(this, tab, hash, key, value);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å…³äºçº¢é»‘æ ‘çš„é€»è¾‘ï¼Œæˆ‘ä»¬ä¸‹ç¯‡æ¥ç€è¯´ï¼Œè¿™ç¯‡æˆ‘ä»¬ä¸»è¦é›†ä¸­åœ¨Mapçš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åè¿˜æœ‰ä¸€ä¸ªæ¨æµ‹ï¼šä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹removeçš„é€»è¾‘ï¼Œå½“TreeNodeçš„èŠ‚ç‚¹å°‘äº8ä¸ªï¼Œä¹Ÿå°±æ˜¯7ä¸ªçš„æ—¶å€™ï¼Œè°ƒç”¨é“¾è¡¨è¯çš„æ“ä½œï¼Œå†æ¬¡è½¬åŒ–æ•°æ®ç»“æ„å—ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;removeæ“ä½œ&quot;&gt;REMOVEæ“ä½œ&lt;/h3&gt;

&lt;p&gt;ç›´æ¥ä¸Šä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  public V remove(Object key) {
    Node&amp;lt;K,V&amp;gt; e;
    return (e = removeNode(hash(key), key, null, false, true)) == null ?
        null : e.value;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hash ç®—æ³•ä¸ºåŒä¸€ä¸ªç®—æ³•&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;final Node&amp;lt;K,V&amp;gt; removeNode(int hash, Object key, Object value, boolean matchValue, boolean movable) {
    Node&amp;lt;K,V&amp;gt;[] tab; Node&amp;lt;K,V&amp;gt; p; int n, index;

    if ((tab = table) != null &amp;amp;&amp;amp; (n = tab.length) &amp;gt; 0 &amp;amp;&amp;amp; (p = tab[index = (n - 1) &amp;amp; hash]) != null) {

        Node&amp;lt;K,V&amp;gt; node = null, e; K k; V v;
        // finde node value
        if (p.hash == hash &amp;amp;&amp;amp;((k = p.key) == key || (key != null &amp;amp;&amp;amp; key.equals(k))))
            node = p;
        else if ((e = p.next) != null) {
            if (p instanceof TreeNode)
                node = ((TreeNode&amp;lt;K,V&amp;gt;)p).getTreeNode(hash, key);
            else {
                do {
                    if (e.hash == hash &amp;amp;&amp;amp;((k = e.key) == key ||(key != null &amp;amp;&amp;amp; key.equals(k)))) {
                        node = e;
                        break;
                    }
                    p = e;
                } while ((e = e.next) != null);
            }
        }

        // !matchValue || (v = node.value) == value
        // nodeä¸ºkeyå€¼å¯¹åº”çš„èŠ‚ç‚¹ï¼Œpä¸ºkeyçš„å‰ä¸€ä¸ªèŠ‚ç‚¹
        if (node != null &amp;amp;&amp;amp; (!matchValue || (v = node.value) == value ||(value != null &amp;amp;&amp;amp; value.equals(v)))) {
            if (node instanceof TreeNode)
               // node ä¸ºå½“å‰çš„èŠ‚ç‚¹
                ((TreeNode&amp;lt;K,V&amp;gt;)node).removeTreeNode(this, tab, movable);
            else if (node == p)
                tab[index] = node.next;
            else
                p.next = node.next;

            ++modCount;
            --size;
//               afterNodeRemoval(node);
            return node;
        }
    }
    return null;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åƒæ¯”è¾ƒPUTçš„é€»è¾‘æ¥è¯´ï¼ŒRemoveæ“ä½œï¼Œé¦–å…ˆè¦æ‰¾åˆ°åˆ é™¤çš„èŠ‚ç‚¹ï¼Œç„¶åæ ¹æ®åˆ é™¤èŠ‚ç‚¹æ‰€åœ¨çš„æ•°ç»„ä¸­å­˜å‚¨èŠ‚ç‚¹çš„ç±»å‹ï¼Œæ¥è¿›è¡Œç¡®å®šï¼Œæ˜¯è¿›è¡Œé“¾è¡¨çš„åˆ é™¤æ“ä½œï¼Œè¿˜æ˜¯çº¢é»‘æ ‘çš„èŠ‚ç‚¹åˆ é™¤æ“ä½œã€‚&lt;/p&gt;

&lt;p&gt;èŠ‚ç‚¹çš„è½¬åŒ–ï¼Œè‚¯å®šåœ¨çº¢é»‘çš„åˆ é™¤æ“ä½œä¸­ï¼Œç”±äºçº¢é»‘æ ‘çš„åˆ é™¤çš„æ“ä½œæ¯”è¾ƒçš„å¤æ‚ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥çœ‹æˆ‘ä»¬å…³å¿ƒçš„é€»è¾‘å³å¯ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; final void removeTreeNode(MyMap&amp;lt;K,V&amp;gt; map, Node&amp;lt;K,V&amp;gt;[] tab,boolean movable) {

   ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
   if (root == null || (movable&amp;amp;&amp;amp; (root.right == null|| (rl = root.left) == null || rl.left == null))) {
           	 	 // ç”±æ ‘è½¬åŒ–ä¸ºé“¾è¡¨çš„æ•°æ®ç»“æ„
                tab[index] = first.untreeify(map);  // too small
                return;
            }
   ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;åˆ¤æ–­ä¹Ÿæ¯”è¾ƒæœ‰æ„æ€&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;final Node&amp;lt;K,V&amp;gt; untreeify(MyMap&amp;lt;K,V&amp;gt; map) {
    Node&amp;lt;K,V&amp;gt; hd = null, tl = null;
    for (Node&amp;lt;K,V&amp;gt; q = this; q != null; q = q.next) {
        Node&amp;lt;K,V&amp;gt; p = map.replacementNode(q, null);
        if (tl == null)
            hd = p;
        else
            tl.next = p;//â‘¤
        tl = p;
    }
    return hd;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç¡®å®å’Œæˆ‘ä»¬é¢„æ–™çš„æƒ…å†µä¸€æ ·ã€‚åœ¨ä¸€å®šçš„æ¡ä»¶ä¸‹ï¼Œæ ‘ç›´æ¥é€€åŒ–ä¸ºé“¾è¡¨æ•°æ®ç»“æ„ã€‚&lt;/p&gt;

&lt;p&gt;å…³äºçº¢é»‘æ ‘çš„æ“ä½œï¼ŒHashMapçš„æ“ä½œï¼Œä¹Ÿå’Œæ™®é€šçš„çº¢é»‘æ ‘ä¸ä¸€æ ·ï¼Œå‡†ç¡®çš„è¯´ï¼Œæ˜¯æ¯”æ™®é€šçš„çº¢é»‘æ ‘å¤æ‚ï¼Œå› ä¸ºæ¶‰åŠåˆ°æ ‘èŠ‚ç‚¹é›†æˆçš„nextï¼Œ å’Œè‡ªå·±å®šä¹‰çš„preæŒ‡å‘çš„ä¿æŒï¼Œä¸ç„¶ä¹Ÿä¸ä¼šæœ‰ æ ‘ç›´æ¥é€€åŒ–ä¸ºé“¾è¡¨ çš„æ–¹æ³•untreeify çš„æ“ä½œâ‘¤æ ‡æ³¨çš„nextæ“ä½œã€‚å…·ä½“æ˜¯å¦‚ä½•çš„ç»´æŒï¼Œæˆ‘ä»¬ä¸‹ç¯‡å†è¯´ã€‚&lt;/p&gt;
</description>
        <pubDate>Sat, 03 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/03/hashmap/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/03/hashmap/</guid>
        
        <category>JDK</category>
        
        
      </item>
    
      <item>
        <title>æ²‰ä¸‹å¿ƒæ¥åˆ†æHashMapçš„æºç </title>
        <description>&lt;p&gt;HashMapçš„æºç åœ¨JDK 1.7 çš„æ—¶å€™ï¼Œè¿˜ç®—æ˜¯å¯ä»¥çœ‹çš„æ¯”è¾ƒçš„æ˜ç™½ï¼Œ1.8åå¼•å…¥äº†çº¢é»‘æ ‘ï¼Œå°±å˜å¾—çœ‹çš„è´¹åŠ²äº†ã€‚
æ‰€ä»¥è¿™æ¬¡å°½å¯èƒ½è¯¦ç»†çš„æ³¨é‡Šæºç ï¼Œä¹Ÿä¸ºè¿™å—åšä¸€ä¸ªæ€»ç»“ã€‚&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;ç²—ç•¥çš„å°è±¡&quot;&gt;ç²—ç•¥çš„å°è±¡&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆæ˜¯æœ€åˆçš„å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/hashmap1.jpg&quot; alt=&quot;MapåŸæ¥çš„æ•°æ®ç»“æ„&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªæ˜¯æˆ‘ä»¬ä»¥å‰å¸¸è§çš„mapçš„æ•°æ®ç»“æ„ï¼šæ¡¶ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºé“¾è¡¨æ•°ç»„ã€‚ä½†æ˜¯1.8ä»¥åï¼Œåœ¨æŸäº›ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œé“¾è¡¨ä¼šå’Œçº¢é»‘æ ‘ç›¸äº’çš„è½¬åŒ–ï¼Œå˜æˆä¸‹é¢çš„è¿™ç§æ•°æ®ç»“æ„ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/AndiHappy/blogimage/master/post/2019/hashmap2.jpg&quot; alt=&quot;MapåŸæ¥çš„æ•°æ®ç»“æ„2&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;å‡†å¤‡å·¥ä½œ&lt;/h3&gt;

&lt;p&gt;ä½†æ˜¯å…·ä½“æ˜¯å¦‚ä½•è½¬åŒ–çš„ï¼Œå¦‚ä½•å®ç°çš„ï¼Œæˆ‘ä»¬éœ€è¦è·Ÿè¸ªä»£ç ï¼Œè¿›è¡Œè¯¦ç»†çš„è·Ÿè¸ªã€‚
ä¸ºäº†è°ƒè¯•å’Œæ³¨é‡Šçš„æ–¹ä¾¿ï¼Œæˆ‘é‡å†™äº†hashçš„ç®—æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/**
   * 3288498===&amp;gt; 3288448
   *
   * 1100100010110110110010
   * 0000000000000000110010
   * 1100100010110110000000
   *
   * é«˜ä¸­ä½ä½çš„å­—ç¬¦å…¨éƒ¨çš„å‚ä¸è¿›æ¥ï¼ŒæŠŠkeyçš„hashå€¼æ‰“æ•£
   */&lt;/span&gt;
	 &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//     int h;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//     return (key == null) ? 0 : (h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; 16);&lt;/span&gt;

     &lt;span class=&quot;cm&quot;&gt;/**
		  * ä¸ºäº†æµ‹è¯•ï¼Œhashå€¼ä¸€å¾‹çš„è¿”å›0
		  * */&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·çš„è¯ï¼Œå…¨éƒ¨çš„å…ƒç´ éƒ½ä¼šæ·»åŠ åˆ°æ¡¶çš„ç¬¬ä¸€ä¸ªä½ç½®ä¸Šï¼ŒæŠŠæ•°æ®çš„å˜åŒ–è¡¨ç°çš„æ›´åŠ è¯¦å°½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æµ‹è¯•ä»£ç &quot;&gt;æµ‹è¯•ä»£ç &lt;/h3&gt;

&lt;p&gt;æš‚æ—¶å…ˆçœ‹Mapæœ€ä¸»è¦çš„ä¸¤ä¸ªæ“ä½œï¼ŒPUTå’ŒREMOVEï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ“ä½œé’ˆå¯¹çš„éƒ½æ˜¯å…ƒç´ çš„å¢åŠ å’Œå‡å°‘ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­èƒ½å¤Ÿçœ‹åˆ°æ•°æ®ç»“æ„çš„å˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;æµ‹è¯•çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;//æ­£ç»çš„æµ‹è¯•&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;MyMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;();&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;mymap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;v&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mymap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;n&quot;&gt;mymap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k5&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;mymap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ•°æ®ç»“æ„çš„å‡†å¤‡å·¥ä½œ&quot;&gt;æ•°æ®ç»“æ„çš„å‡†å¤‡å·¥ä½œï¼š&lt;/h3&gt;

&lt;p&gt;ä»å°åˆ°å¤§çš„æ¥è¯´ï¼Œé¦–å…ˆæ˜¯ Key å’Œ Value ç»„æˆé”®å€¼å¯¹çš„è¡¨ç¤º NodeèŠ‚ç‚¹ï¼ŒNodeèŠ‚ç‚¹è¡¨ç¤ºä¸ºé“¾è¡¨çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥å°±æœ‰äº†nextçš„å±æ€§ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// åŒ…å«ä¸€ä¸ªhashå€¼&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åå°±æ˜¯çº¢é»‘æ ‘èŠ‚ç‚¹çš„è¡¨ç¤ºï¼Œå…·æœ‰leftï¼Œrightï¼Œredä¹‹ç±»çš„æ ‡å¿—æ€§å±æ€§ï¼Œä¸è¿‡åœ¨HashMapä¸­ï¼Œçº¢é»‘æ ‘çš„èŠ‚ç‚¹æ˜¯Nodeçš„å­ç±»ï¼Œä¸»è¦æ˜¯ä¸ºäº†è½¬æ¢çš„æ–¹ä¾¿ï¼Œåé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LinkedHashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Entry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// red-black tree links&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prev&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// needed to unlink next upon deletion&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ä»è¿™ä¸ªæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ°ï¼Œä¸ä»…æœ‰right ï¼Œleftï¼Œredï¼Œè¿˜æœ‰parentï¼Œpreå±æ€§ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åå°±æ˜¯å­˜å‚¨èŠ‚ç‚¹çš„æ•°ç»„çš„æ•°æ®ç»“æ„ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// éåºåˆ—åŒ–&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;transient&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TreeNodeç»§æ‰¿è‡ªNodeï¼Œåœ¨æ•°ç»„çš„è¡¨è¿°ä¸­ç›´æ¥çš„å£°æ˜NodeèŠ‚ç‚¹å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;putæ“ä½œ&quot;&gt;PUTæ“ä½œ&lt;/h3&gt;

&lt;p&gt;ä»£ç çš„æ³¨é‡Šå·²ç»éå¸¸çš„è¯¦ç»†ï¼Œæˆ‘ä¼šåœ¨ä»£ç çš„æ“ä½œçš„è¿‡ç¨‹ä¸­æ·»åŠ å¯¹åº”çš„å›¾ç¤ºï¼Œä»¥ä¾¿äºæ›´åŠ æ˜ç™½çš„è¯´æ˜ï¼š&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;putVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æœŸä¸­çš„ &lt;em&gt;hash(key)&lt;/em&gt; ç»è¿‡äº†æ”¹å†™ï¼Œå…¨éƒ¨çš„è¿”å›0ï¼Œè¿™æ ·æ•°æ®ç»“æ„å˜åŒ–çš„ä¼šæ›´åŠ çš„æ˜æ˜¾ï¼Œä½†æ˜¯åœ¨åŸå§‹çš„HashMapè‚¯å®šä¸æ˜¯è¿™æ ·çš„ï¼Œå¦‚hashæ–¹æ³•ä¸­çš„æ³¨é‡Šä¸€æ ·ï¼ŒåŸå§‹çš„hashæ³¨é‡æ•£åˆ—çš„å‡åŒ€åº¦ã€‚&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;cm&quot;&gt;/**
   * Implements Map.put and related methods.
   * puté€»è¾‘ï¼š
   * 	1. æ£€æŸ¥hashmapä¸­çš„tableæ˜¯å¦éœ€è¦æ‰©å®¹
   * 	2.1 ç¡®å®šæ”¾å…¥çš„å€¼çš„ä½ç½®ï¼š(n - 1) &amp;amp; hashï¼Œhashçš„è®¡ç®—æ–¹å¼ï¼š(h = key.hashCode()) ^ (h &amp;gt;&amp;gt;&amp;gt; 16)
   * 	2.2 å¦‚æœè¯¥ä½ç½®æ²¡æœ‰å€¼ï¼Œç›´æ¥çš„æ–°å»ºNodeï¼Œè®¾ç½®keyï¼Œvalueå€¼ï¼Œæ”¾å…¥table
   * 	2.3 å¦‚æœè¯¥ä½ç½®æœ‰Nodeå€¼ï¼Œåˆ¤æ–­keyå€¼æœ‰å¦ç›¸åŒ
   * 		2.3.1  ç›¸åŒåˆ™æ˜¯æ›¿æ¢valueå€¼
   *     2.3.2  ä¸ç›¸åŒåˆ™æ˜¯åˆ¤æ–­Nodeå€¼çš„ç±»å‹
   *     		2.3.2.1 å¦‚æœNodeå€¼çš„ç±»æ€§æ˜¯ï¼šTreeNodeï¼Œæ ‡è¯†ä¸ºä¸€é¢—çº¢é»‘æ ‘çš„ç±»å‹ï¼Œè°ƒç”¨putTreeVal
   */&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;putVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;onlyIfAbsent&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;evict&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;cm&quot;&gt;/* n ä»£è¡¨çš„æ˜¯åŸå§‹çš„hashmapä¸­ table çš„ lengthå€¼*/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;c1&quot;&gt;//æ‰©å®¹&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// &amp;amp; å€¼çš„è¿ç®—ï¼šå¾—åˆ°çš„å€¼åªå¯èƒ½æ¯”n-1å°,å¦‚æœtable[i]ä¸ºnull,ç›´æ¥çš„èµ‹å€¼å³å¯ã€‚&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//â‘ &lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;K&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;c1&quot;&gt;// p=table[i]; hashå€¼ç›¸åŒï¼Œkå€¼å’Œpçš„keyå€¼ä¸€æ ·ï¼Œç›´æ¥çš„æ›¿æ¢&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//â‘¡&lt;/span&gt;
             &lt;span class=&quot;c1&quot;&gt;//æ›¿æ¢valueå€¼&lt;/span&gt;
             &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//â‘¢&lt;/span&gt;
             &lt;span class=&quot;c1&quot;&gt;// å¦‚æœæœ‰å€¼ï¼Œå¹¶ä¸”Nodeçš„ç±»å‹æ˜¯TreeNodeç±»å‹ï¼Œè°ƒç”¨TreeNodeçš„putTreeVal&lt;/span&gt;
             &lt;span class=&quot;c1&quot;&gt;// TODO æš‚æ—¶çš„æ”¾å¼ƒè¿™ä¸ªåˆ†æ”¯çš„åˆ†æ&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TreeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putTreeVal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// â‘£&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å¦‚æœä¸æ˜¯TreeNodeï¼Œé‚£å°±æ˜¯ä¸€ä¸ªé“¾è¡¨çš„ç±»å‹&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;binCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                      &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                      &lt;span class=&quot;c1&quot;&gt;// å¦‚æœè¾¾åˆ°äº†7ä¸ªï¼Œå¼€å§‹å˜æ¢æ•°æ®ç»“æ„&lt;/span&gt;
                      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;binCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TREEIFY_THRESHOLD&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// -1 for 1st&lt;/span&gt;
                          &lt;span class=&quot;c1&quot;&gt;//ä¼ å…¥çš„å‚æ•°ç«Ÿç„¶æ˜¯tableå’Œhashå€¼&lt;/span&gt;
                          &lt;span class=&quot;n&quot;&gt;treeifyBin&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                      &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                  &lt;span class=&quot;c1&quot;&gt;//4.2&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))))&lt;/span&gt;
                      &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                  &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
              &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// existing mapping for key&lt;/span&gt;
              &lt;span class=&quot;n&quot;&gt;V&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onlyIfAbsent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//               afterNodeAccess(e);&lt;/span&gt;
              &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threshold&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;resize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;afterNodeInsertion&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;evict&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Fri, 02 Aug 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/08/02/hashmap/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/08/02/hashmap/</guid>
        
        <category>JDK</category>
        
        
      </item>
    
      <item>
        <title>æ€ä¹ˆè¯»ä¹¦</title>
        <description>&lt;p&gt;Itâ€™s not about how many books you read, itâ€™s about how much youÂ retainÂ from what you read. &lt;br /&gt;
&lt;!--more--&gt;
Most people I talk to donâ€™t have a reading strategy. They just pick up something and start reading. I used to be like that. But now, thatâ€™s unthinkable to me. Sure, you might read a novel for entertainment.&lt;/p&gt;

&lt;p&gt;But think about it; why do you even read a non-fiction(è™šæ„çš„) book in the first place?
 Exactly, you want to get something out of it.
You want to learn things that you can apply in your life to grow.
Thatâ€™s the whole point.
Iâ€™m often asked: â€œHow do you remember information you read in books?â€
In this post, Iâ€™ll explain my system.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Have A Purpose
Before I even think about which books Iâ€™m going to read, I think about what Iâ€™m trying to achieve.
 I strongly believe that the content of books should alignï¼ˆï¼‰ with whatâ€™s going on in your life.
Iâ€™ll give you an example.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;But back in 2011, that kind of stuff wasnâ€™t on my mind.
I had just finished my degree and started a business.
I was hustlingï¼ˆå¿™ç¢Œï¼‰ like a moronï¼ˆç¬¨è›‹ï¼‰ï¼ˆæˆ‘åƒä¸ªç™½ç—´ä¸€æ ·å¿™ç¢Œç€ï¼‰ and only thinking about growing our business.
Thatâ€™s why you need a purpose to read.&lt;/p&gt;

&lt;p&gt;Only read books that teach you how to overcome your current challenges.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;See Yourself As A Teacher
Knowledge is only good if you apply it, right? But hereâ€™s one thing a lot of people donâ€™t consider:
Â SharingÂ knowledge is a great application. ï¼ˆåˆ†äº«çŸ¥è¯†æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åº”ç”¨ï¼‰
You might not be a teacher, but if you act like one, youâ€™re already applying knowledge.
All it takes is a mindset shift.ï¼ˆå¿ƒæ€çš„è½¬å˜ï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Donâ€™t just â€˜readâ€™ a book. No, devour ï¼ˆå¦‚é¥¥ä¼¼æ¸´ï¼‰a book and talk about it with others.&lt;/p&gt;

&lt;p&gt;Say to yourself: â€œI must focus on the book at hand because Iâ€™m going to share everything I learned with others. I better know my shit.â€&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Highlight &amp;amp; Make Mental Connections&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The more connections you make between pieces of information in your brain,Â the better you remember it.&lt;/p&gt;

&lt;p&gt;I do that by making a lot of notes.&lt;/p&gt;

&lt;p&gt;If you think books are sacredï¼ˆç¥åœ£çš„ï¼‰ and shouldnâ€™t be highlighted and written on,
you will never retain a lot from books. Making notes, folding pages, and highlighting text is simple and practical.&lt;/p&gt;

&lt;p&gt;Thatâ€™s why I always keep a highlighter and pen with me.
If you read digitally, you only need your finger
â€” just donâ€™tÂ forgetÂ to highlight interesting passages.&lt;/p&gt;

&lt;p&gt;Here are some other tips that help me to make better connections between information:&lt;/p&gt;

&lt;p&gt;I have a separate â€œBook Notesâ€ folder in my note-taking app.
When I highlight something very important, I take a picture of that page and upload it to my Book Notes.
Then, I immediately write WHY itâ€™s important and how I can use it.&lt;/p&gt;

&lt;p&gt;I use this process because I often highlight things, and when I look back, I think: â€œWhy did I highlight this?â€&lt;/p&gt;

&lt;p&gt;å¦‚ä½•å®‰æ’ä¼šçœ‹ï¼Œæ˜¯éå¸¸é‡è¦çš„ï¼šå…·ä½“å¯è¡Œçš„å»ºè®®&lt;/p&gt;

&lt;p&gt;So always write down why you highlighted something. You donâ€™t have to do it for every highlight. Just do it for sections that you immediately have an application for. I often write down how I can use a piece of advice in my business. And when I get an idea for an article, I think of a title and attach a picture of the text that I highlighted.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Visualize &amp;amp; Imagine&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Another great way to make connections in your mind is by visualizingï¼ˆä½¿å½¢è±¡åŒ–ï¼‰ what youâ€™re learning.
Weâ€™re visual learners, and our memories are also visual.&lt;/p&gt;

&lt;p&gt;What I like to do when I read is to have imaginary conversations about the stuff that Iâ€™m reading. I imagine myself sitting together with a friend and talking about the subject. Or, when I read a piece of useful advice, I visualize myself actually doing that thing.&lt;/p&gt;

&lt;p&gt;I remember vividly when I readÂ How To Win Friends And Influence Peopleby Dale Carnegie for the first time. One of the pieces of advice Carnegie gives, is to become genuinelyï¼ˆçœŸè¯šçš„ï¼‰ interested in people.&lt;/p&gt;

&lt;p&gt;So I visualized myself having a conversation with a stranger and being genuinely interested in what that person had to say. When you visualize something, itâ€™s almost like the real thing.&lt;/p&gt;

&lt;p&gt;Visualization is also a common self-improvement tool thatâ€™s been used many top-performers. Recently retired NBA-player Paul Pierce once explained how he uses it before a game:&lt;/p&gt;

&lt;p&gt;â€œI probably visualize myself, the shots Iâ€™m going to get in the game, how Iâ€™m going to play defense, what we have to do to stop the other teamâ€™s best player, what itâ€™s going to take out of me, the whole aspect of the game.â€&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Immediately Apply One Piece Of New Knowledge&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Look at your life. Ask yourself: How can I grow? That can be personally, financially ç»æµä¸Šçš„ or spiritually ç²¾ç¥ä¸Šçš„.&lt;/p&gt;

&lt;p&gt;Understand that growth doesnâ€™t happen by itself. Learning new skills, earning more money, having a great relationship â€” it all takes hard work.
But you can make that growth a lot easier if you apply the things you learn in books.&lt;/p&gt;

&lt;p&gt;Remember: Knowledge alone is completely useless.&lt;/p&gt;

&lt;p&gt;Thereâ€™s nothing sadder å¯æ‚²çš„ than a well-read person who holds himself captive by the four walls of his room.&lt;/p&gt;

&lt;p&gt;You must go out there and apply things you learn.
Once you do that, you will grow.
No doubt about it. So always ask yourself this after you finish a book:&lt;/p&gt;

&lt;p&gt;â€œWhatâ€™s the one thing Iâ€™m going to apply after reading this book?â€&lt;/p&gt;

&lt;p&gt;You see, itâ€™s aboutÂ what you doÂ with your knowledge, not about how much you have.&lt;/p&gt;

&lt;p&gt;Donâ€™t read more. Read smarter.
Also, apply this strategy to everything you read. Even something little like this article.
So letâ€™s do a little exercise to close this off:&lt;/p&gt;

&lt;p&gt;Whatâ€™s the one thing youâ€™re going to apply after reading this article?
Answer (and visualize) that, and Iâ€™ll bet youâ€™ll retain more from this article than any other thing youâ€™ve read today.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¸¦æœ‰ç›®çš„çš„å»è¯»ä¹¦ï¼ŒæŠŠè‡ªå·±å½“åšè€å¸ˆ&lt;/li&gt;
  &lt;li&gt;è¯»ä¹¦ç¬”è®°ï¼Œæ€ä¹ˆæ ·å»åšè¯»ä¹¦ç¬”è®°ï¼Œä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒ&lt;/li&gt;
  &lt;li&gt;è§†è§‰åŒ–çŸ¥è¯†ï¼Œè®°å½•ã€‚åŠŸåˆ©åŒ–çš„è¯»ä¹¦ï¼Œä½œç”¨äºè‡ªèº«&lt;/li&gt;
  &lt;li&gt;ç«‹åˆ»çš„å»å®è·µï¼Œåªå­˜å‚¨åœ¨è‡ªå·±è„‘å­é‡Œé¢çš„çŸ¥è¯†æ˜¯æ²¡æœ‰ç”¨å¤„çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
        <pubDate>Mon, 01 Jul 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/07/01/readingbook/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/07/01/readingbook/</guid>
        
        
      </item>
    
      <item>
        <title>è¿œç¨‹å·¥ä½œlanguageçš„é€‰æ‹©</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://blog.usejournal.com/what-technologies-to-learn-to-land-a-remote-job-in-2018-7dff03e17982&quot;&gt;æ–‡ç« åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What technologies to learn to land a remote job in 2018&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;At this point in my career, Iâ€™m quite invested in the whole remote working, digital nomad shtick. My family, friends, and even strangers online now recognize me as the â€œguy who works in his pajamas from homeâ€. So, perhaps Iâ€™m the man for the job when it comes to recommending technologies that will help propel you into this lifestyle.
Note: I focus primarily on software development, so if youâ€™re a videographer or something, this post wonâ€™t provide as much value.&lt;/p&gt;

&lt;p&gt;Before I just go offï¼ˆè¿›è¡Œï¼‰ ranting about the technologies I believe will assistï¼ˆå¸®åŠ©ï¼‰ you in getting a remote gigï¼ˆæ¼”å¥ï¼Œä¸´æ—¶å·¥ä½œï¼‰; there are a few attributes that may be beneficial, or in some cases required. For example, youâ€™ll have a much better chance if youâ€™re personable, have past experience working from home, or have existing clienteleï¼ˆå§”æ‰˜äººï¼Œé¡¾å®¢ï¼‰. For now, though, letâ€™s omitï¼ˆto fail to include or do somethingï¼‰ anything that falls under a similar category, I want to focus primarily on the tech.
Firstly, letâ€™s focus on programming languages. I searched every popular language on several remote job sites that fit my criteriaï¼ˆa principle or standard by which something may be judged or decided.ï¼‰ (i.e. exclusively remote jobs to avoid on-site positions slipping through the cracks). One downside was most of these sites had 0 jobs available for certain languages. So, I resorted to StackOverflow for another metric, as it had remote jobs available for more obscure languages like Perl and R. StackOverflow jobs provided a solid baseline for remote jobs, and even did a superb job of filtering all on-site positions out.
The results
Obviously, these results are subject to change over the course of this year, so keep that in mind.&lt;/p&gt;

&lt;p&gt;Results for 8 commonly used programming languages
Personally, I didnâ€™t find this very surprising. Javascript has been growing exponentially for the past few years with the emergence of node.js and various front-end frameworks. Java, on the other hand is a tad bit interesting, because nearly all the jobs are senior positions. Python had a healthy mixture of web, machine learning, and data science jobs. Ruby is a little misleading because ALL of the jobs involved Ruby on Railsâ€Šâ€”â€Šthe web framework (more on frameworks later). C++ and Go were very close, but Iâ€™d be willing to bet Go overtakes the former shortly.
One thing to note regarding Javascript is the over abundance of frameworks that have been hitting the scene for the past few years. I mention React quite a bit in my articles surrounding the remote job landscape. (Mostly because I contribute my first remote job to my capabilities using the framework.) Job searchers should still be seeing a consistent flow of React positions popping up. At the time of writing it was ahead of the race in terms of front-end frameworks, with angular close behind, and vue quickly picking up steam. With the rise of React Native in the mobile space, experience working in React has become even more beneficial. Not surprisingly, express is still far ahead of the other backend frameworks.
I would like to take a minute to talk about Ruby in a little more detail. I wrote above about all the positions being Ruby on Rails (the popular web framework), but interestingly I also spotted a lot of senior-level positions for the language. I presume the age of the language and framework has something a lot to do with this. As the language becomes less popularâ€Šâ€”â€Šnot saying itâ€™s â€œdyingâ€ by any stretchâ€Šâ€”â€Šthe roles become a tad more demanding; at least thatâ€™s what Iâ€™ve come to find. So if youâ€™re new to web development Iâ€™d avoid putting your eggs in the Ruby basket as it would be difficult to land a junior-level role.
Another language to zoom in on would be PHP. Frameworks like Laravel and Symfony are all the buzz right now, but we canâ€™t dismiss WordPress. Admittedly, I did less research into the 8th ranked language on the list, but I found a majority of the positions to be WordPress. Furthermore, positions such as these were quite a bit less technical. After reading the requirements for a few postings, it was clear that they fell more into the creative/design side of thingsâ€Šâ€”â€ŠUI, UX, PSD-to-HTML, all were common themes.
Iâ€™ll wrap up with a few words from my personal experience working and researching in this field. If you consider yourself â€œlanguage agnosticâ€ or a â€œT-shaped developerâ€ youâ€™ll have a much better chance of landing a remote job. I would consider myself very focused on React development, but I try to stay up to date on other technologies. A lot of co-workers ask how I know so much about something like Django, but spend no professional time working with the framework. The answer is quite simple, I love python and web development so I spend a lot of time reading about Django and building side-projects with the technology. I also dip my feet into WordPress every now and then because of freelance work that comes my way. Itâ€™s easy to excel in one particular language and maintain competency in another if the other interests you. A friend of mine works all day with node.js, but seems to be a master of 4â€“6 other tech stacks. Sheâ€™s developed small games, created several bots, even dipped into machine learning. Itâ€™s her passion.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;So, my suggestion is to focus on a language that will bring you monetary and lifestyle results, but also pursue your passions and interests. I know it feels like youâ€™re just wasting time if you play around with unpopular technologies, but youâ€™re having fun, and that prevents burnout.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;996æŠ•å…¥çš„æ˜¯è‡ªå·±çš„passions and interests.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Apr 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/04/15/remotework/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/04/15/remotework/</guid>
        
        
      </item>
    
      <item>
        <title>ä¸ºä»€ä¹ˆRethinkDBå¤±è´¥äº†ï¼Ÿ</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://www.defmacro.org/2017/01/18/why-rethinkdb-failed.html&quot;&gt;æ–‡ç« åœ°å€&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In hindsight, two things went wrong â€“ we picked a terrible market and optimized the product for the wrong metrics of goodness.Each mistake likely cut RethinkDBâ€™s valuation by one to two orders of magnitudeï¼ˆæ•°é‡çº§ï¼‰. So if we got either of these right, RethinkDB would have been the size of MongoDB, and if we got both of them right, we eventually could have been the size of Red Hat[1].&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;ä¸¤ä¸ªåŸå› ï¼š&lt;/p&gt;

&lt;p&gt;å¸‚åœºçš„é€‰æ‹©ï¼š
		è®¾æƒ³ä¸­çš„æ•°æ®åº“å¸‚åœºéå¸¸çš„å¤§ï¼Œä½†æ˜¯å¤§å®¶æŠŠä½ å½“åšæ˜¯å¼€æºè½¯ä»¶ã€‚éœ€æ±‚å¾ˆå¤§ï¼Œä½†å¾ˆå¤šéƒ½æ˜¯ä¼ªéœ€æ±‚ã€‚ä¼ªéœ€æ±‚çš„å‰æä¸‹é¢ï¼ŒçœŸæ­£çš„è®¢å•è·å–éå¸¸çš„å›°éš¾ã€‚
		Developers love building developer tools, often for free. So while there is massive demand, the supply vastly outstrips it. ThisÂ drivesÂ the number of alternatives up, and the prices down to zero.
For us, it meant an intractable customer acquisition funnel. This has disastrous domino effects. It demoralizes the team, and makes it very challenging to attract investment and hire top talent. In turn, that constrains your resources so you canâ€™t make sufficient investment in product and distribution. Startups live and die by momentum, and early distribution challenges almost always doom you to eventual death.&lt;/p&gt;

&lt;p&gt;äº§å“çš„æ–¹å‘ï¼š&lt;/p&gt;

&lt;p&gt;ä¸€å¼€å§‹çš„äº§å“çš„æ–¹å‘: elegant, robust, and beautiful product&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Correctness.Â We made very strict guarantees, andÂ fulfilledÂ themÂ religiously.&lt;/li&gt;
  &lt;li&gt;Simplicity of the interface.Â We took on most of the complexity in the implementation, so application developers wouldnâ€™t have to.&lt;/li&gt;
  &lt;li&gt;Consistency.Â We made everything from the query language, to the client drivers, to cluster configuration, to documentation, to the marketing copy on the front page as consistent as possible.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶åˆ†æçš„æ­£ç¡®çš„æ–¹å‘ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Timely arrival.Â They wanted the product to actually exist when they needed it, not three years later.&lt;/li&gt;
  &lt;li&gt;Palpable speed.Â People wanted RethinkDB to be fast on workloads theyÂ actually tried, rather than â€œreal worldâ€ workloads we suggested. For example, theyâ€™d write quick scripts to measure how long it takes to insert ten thousand documents without ever reading them back. MongoDB mastered these workloads brilliantly, while we fought the losing battle of educating the market.&lt;/li&gt;
  &lt;li&gt;A use case.Â We set out to buildÂ a good database system, but users wantedÂ a good way to do X(e.g. a good way to store JSON documents from hapi, a good way to store and analyze logs, a good way to create reports, etc.)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åˆé€‚çš„å°±æ˜¯æœ€å¥½çš„ï¼Œè¿™ä¸ªæ˜¯å®Œç¾çš„æ³¨è§£ã€‚&lt;/p&gt;

&lt;p&gt;By the time we felt RethinkDB satisfied our design goals and we were confident enough to recommend it to be used in production, almost everyone was asking â€œhow is RethinkDB different from MongoDB?â€ We worked hard to explain why correctness, simplicity, and consistency are important, but ultimately these werenâ€™t the metrics of goodness that mattered to most users.&lt;/p&gt;

&lt;p&gt;è¿­ä»£è§£å†³äº†å¾ˆå¤šçš„é—®é¢˜ï¼Œæ»¡è¶³éœ€æ±‚ï¼Œæ»¡è¶³å½“ä¸‹çš„éœ€æ±‚ï¼Œæ»¡è¶³å½“ä¸‹çš„æœ‰æ•ˆçš„éœ€æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;But over time I learned to appreciate the wisdom of the crowds. MongoDB turned regular developers into heroesÂ when people needed it, not years after the fact. It made data storage fast, and let people ship products quickly. And over time, MongoDB grew up. One by one, they fixed the issues with the architecture, and now it is an excellent product. It may not be as beautiful as we would have wanted, but it does the job, and it does it well.&lt;/p&gt;

&lt;p&gt;ä¸€æ­¥é”™æ­¥æ­¥é”™ï¼Œåœ¨åŸæœ‰çš„åŸºç¡€æ€§ä¸Šè¿›è¡Œäº†é”™è¯¯çš„æ–¹å‘è½¬å˜ã€‚
The obvious problem with a small database company building a cloud service is that it pattern matches to a common startup failure mode â€“ splitting focus.Â &lt;/p&gt;

&lt;p&gt;è§„å¾‹å°±æ˜¯è§„å¾‹ï¼Œä¸ä¼šå› ä¸ºä½ çš„å¿½è§†å°±ä¸å­˜åœ¨ã€‚
Early RethinkDB was quite a bit like that. We had no intuition for products or markets, so weâ€™d go through the motions of building a company without actually understanding what we were doing. Whatâ€™s more, we had enormousÂ optimism bias. Just like physicians know that gifts from pharmaceutical companies have biasing effects for other physicians but believe they are immune from the effect, we believed we were immune from the laws of economics and the math of running a business. The math, of course, eventually caught up with us.&lt;/p&gt;
</description>
        <pubDate>Tue, 09 Apr 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/04/09/whymongoDBSuccess/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/04/09/whymongoDBSuccess/</guid>
        
        
      </item>
    
      <item>
        <title>redisæ¢³ç†</title>
        <description>&lt;p&gt;redisä¸»è¦æ“ä½œçš„æ•°æ®æœ‰äº”ç§ï¼ŒStringï¼ŒListï¼ŒMapï¼ŒSetï¼Œsort Set ç®€ç§°ä¸ºZSetã€‚è¿™äº”ç±»çš„æ“ä½œçš„æ•°æ®çš„åº•å±‚
æ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚
redisä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ
redisçš„é›†ç¾¤çš„æ¨¡å¼
redisçš„å†…å­˜ç®¡ç†æ¨¡å¼
redisçš„æŒä¹…åŒ–æ“ä½œç­‰å¸¸è§çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å‘ç°é—®é¢˜ï¼Œç„¶åæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªçš„å›ç­”ï¼Œæ·±å…¥ã€‚&lt;/p&gt;
</description>
        <pubDate>Fri, 01 Mar 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/03/01/redis-data/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/03/01/redis-data/</guid>
        
        <category>redis</category>
        
        
      </item>
    
  </channel>
</rss>
